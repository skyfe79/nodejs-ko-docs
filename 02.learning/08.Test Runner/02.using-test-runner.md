# Table of Contents

- [Node.js í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ í™œìš©í•˜ê¸°](#nodejs-í…ŒìŠ¤íŠ¸-ëŸ¬ë„ˆ-í™œìš©í•˜ê¸°)
  - [ì¼ë°˜ ì„¤ì •](#ì¼ë°˜-ì„¤ì •)
  - [ì„œë¹„ìŠ¤ì›Œì»¤ í…ŒìŠ¤íŠ¸](#ì„œë¹„ìŠ¤ì›Œì»¤-í…ŒìŠ¤íŠ¸)
  - [ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸](#ìŠ¤ëƒ…ìƒ·-í…ŒìŠ¤íŠ¸)
  - [ìœ ë‹› í…ŒìŠ¤íŠ¸](#ìœ ë‹›-í…ŒìŠ¤íŠ¸)
  - [ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸](#ì‚¬ìš©ì-ì¸í„°í˜ì´ìŠ¤-í…ŒìŠ¤íŠ¸)

# Node.js í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ í™œìš©í•˜ê¸°

Node.jsëŠ” ê°•ë ¥í•˜ê³  ìœ ì—°í•œ ë‚´ì¥ í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆë¥¼ ì œê³µí•œë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆë¥¼ ì„¤ì •í•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.

```text displayName="í”„ë¡œì íŠ¸ êµ¬ì¡° ê°œìš”"
example/
  â”œ â€¦
  â”œ src/
    â”œ app/â€¦
    â”” sw/â€¦
  â”” test/
    â”œ globals/
      â”œ â€¦
      â”œ IndexedDb.js
      â”” ServiceWorkerGlobalScope.js
    â”œ setup.mjs
    â”œ setup.units.mjs
    â”” setup.ui.mjs
```

```bash displayName="ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜"
npm init -y
npm install --save-dev concurrently
```

```json displayName="package.json ì„¤ì •"
{
  "name": "example",
  "scripts": {
    "test": "concurrently --kill-others-on-fail --prefix none npm:test:*",
    "test:sw": "node --import ./test/setup.sw.mjs --test './src/sw/**/*.spec.*'",
    "test:units": "node --import ./test/setup.units.mjs --test './src/app/**/*.spec.*'",
    "test:ui": "node --import ./test/setup.ui.mjs --test './src/app/**/*.test.*'"
  }
}
```

> **ì°¸ê³ **: glob íŒ¨í„´ì€ Node.js v21 ì´ìƒì—ì„œë§Œ ì§€ì›ëœë‹¤. glob íŒ¨í„´ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë°˜ë“œì‹œ ë”°ì˜´í‘œë¡œ ê°ì‹¸ì•¼ í•œë‹¤. ë”°ì˜´í‘œ ì—†ì´ ì‚¬ìš©í•˜ë©´ ì²˜ìŒì—ëŠ” ì‘ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ë™ì‘ì„ ë³´ì¼ ìˆ˜ ìˆë‹¤.

ëª¨ë“  í…ŒìŠ¤íŠ¸ ì„¤ì •ì— ê³µí†µìœ¼ë¡œ í•„ìš”í•œ ê¸°ë³¸ ì„¤ì •ì´ ìˆë‹¤. ì´ëŸ¬í•œ ì„¤ì •ì€ ê¸°ë³¸ ì„¤ì • íŒŒì¼ì— ë„£ì–´ë‘ê³ , ë‹¤ë¥¸ íŠ¹ìˆ˜í•œ ì„¤ì • íŒŒì¼ì—ì„œ ì´ë¥¼ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•œë‹¤.

## ì¼ë°˜ ì„¤ì •

```javascript
import { register } from 'node:module';

register('some-typescript-loader');
// ì´í›„ë¶€í„° TypeScript ì§€ì›
// ë‹¨, ë‹¤ë¥¸ test/setup.*.mjs íŒŒì¼ë“¤ì€ ì—¬ì „íˆ ìˆœìˆ˜ JavaScriptì—¬ì•¼ í•œë‹¤!
```

ê°ê°ì˜ ì„¤ì •ë§ˆë‹¤ ì „ìš© `setup` íŒŒì¼ì„ ìƒì„±í•œë‹¤(ê¸°ë³¸ `setup.mjs` íŒŒì¼ì´ ê° íŒŒì¼ ë‚´ì—ì„œ ì„í¬íŠ¸ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤). ì„¤ì •ì„ ë¶„ë¦¬í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆì§€ë§Œ, ê°€ì¥ ëª…í™•í•œ ì´ìœ ëŠ” [YAGNI](https://en.wikipedia.org/wiki/You_aren't_gonna_need_it)(í•„ìš”í•˜ì§€ ì•Šì„ ê²ƒì„ ë¯¸ë¦¬ ë§Œë“¤ì§€ ë§ë¼ëŠ” ì›ì¹™)ì™€ ì„±ëŠ¥ ë•Œë¬¸ì´ë‹¤. ì„¤ì •í•˜ëŠ” ëŒ€ë¶€ë¶„ì€ í™˜ê²½ë³„ ëª©(mock)/ìŠ¤í…(stub)ì¸ ê²½ìš°ê°€ ë§ì€ë°, ì´ëŠ” ìƒë‹¹í•œ ë¹„ìš©ì´ ë“¤ ìˆ˜ ìˆìœ¼ë©° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì†ë„ë¥¼ ì €í•˜ì‹œí‚¨ë‹¤. ë¶ˆí•„ìš”í•  ë•ŒëŠ” ì´ëŸ¬í•œ ë¹„ìš©(CIì— ì§€ë¶ˆí•˜ëŠ” ì‹¤ì œ ë¹„ìš©, í…ŒìŠ¤íŠ¸ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ ë“±)ì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ì•„ë˜ì˜ ê° ì˜ˆì œëŠ” ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ê°€ì ¸ì˜¨ ê²ƒì´ë‹¤. ëª¨ë“  í”„ë¡œì íŠ¸ì— ì í•©í•˜ê±°ë‚˜ ì ìš© ê°€ëŠ¥í•˜ì§€ëŠ” ì•Šì„ ìˆ˜ ìˆì§€ë§Œ, ê°ê°ì˜ ì˜ˆì œëŠ” ë„ë¦¬ ì ìš©í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ì ì¸ ê°œë…ì„ ë³´ì—¬ì¤€ë‹¤.

## ì„œë¹„ìŠ¤ì›Œì»¤ í…ŒìŠ¤íŠ¸

[`ServiceWorkerGlobalScope`](https://developer.mozilla.org/docs/Web/API/ServiceWorkerGlobalScope)ëŠ” ë‹¤ë¥¸ í™˜ê²½ì—ì„œëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŠ¹ìˆ˜í•œ APIë¥¼ í¬í•¨í•œë‹¤. ì¼ë¶€ APIëŠ” ê²‰ë³´ê¸°ì— ë‹¤ë¥¸ APIì™€ ë¹„ìŠ·í•´ ë³´ì´ì§€ë§Œ(ì˜ˆ: `fetch`) í™•ì¥ëœ ë™ì‘ì„ ê°€ì§„ë‹¤. ì´ëŸ¬í•œ APIê°€ ê´€ë ¨ ì—†ëŠ” í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•œë‹¤.

```javascript
import { beforeEach } from 'node:test';

import { ServiceWorkerGlobalScope } from './globals/ServiceWorkerGlobalScope.js';

import './setup.mjs'; // ğŸ’¡

beforeEach(globalSWBeforeEach);
function globalSWBeforeEach() {
  globalThis.self = new ServiceWorkerGlobalScope();
}
```

```javascript
import assert from 'node:assert/strict';
import { describe, mock, it } from 'node:test';

import { onActivate } from './onActivate.js';

describe('ServiceWorker::onActivate()', () => {
  const globalSelf = globalThis.self;
  const claim = mock.fn(async function mock__claim() {});
  const matchAll = mock.fn(async function mock__matchAll() {});

  class ActivateEvent extends Event {
    constructor(...args) {
      super('activate', ...args);
    }
  }

  before(() => {
    globalThis.self = {
      clients: { claim, matchAll },
    };
  });
  after(() => {
    global.self = globalSelf;
  });

  it('should claim all clients', async () => {
    await onActivate(new ActivateEvent());

    assert.equal(claim.mock.callCount(), 1);
    assert.equal(matchAll.mock.callCount(), 1);
  });
});
```

## ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸

ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ëŠ” Jestê°€ ëŒ€ì¤‘í™”í•œ í…ŒìŠ¤íŠ¸ ê¸°ë²•ì´ë‹¤. í˜„ì¬ëŠ” Node.js v22.3.0ì„ í¬í•¨í•œ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³  ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê²°ê³¼ ê²€ì¦ì´ë‚˜ [ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ì• ì¦ˆ ì½”ë“œ](https://en.wikipedia.org/wiki/Infrastructure_as_code) ì„¤ì • í™•ì¸ ë“± ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš© ì‚¬ë¡€ëŠ” ë‹¤ë¥´ë”ë¼ë„ ê¸°ë³¸ ê°œë…ì€ ë™ì¼í•˜ë‹¤.

ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ íŠ¹ë³„íˆ í•„ìš”í•œ ì„¤ì •ì€ [`--experimental-test-snapshots`]() í”Œë˜ê·¸ë¡œ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ëŠ” ê²ƒë¿ì´ë‹¤. í•˜ì§€ë§Œ ì„ íƒì  ì„¤ì • ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì„¤ì • íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

ë…¸ë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ êµ¬ë¬¸ ê°•ì¡° í‘œì‹œ ê°ì§€ì™€ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” íŒŒì¼ëª… `.js.snapshot`ì„ ìƒì„±í•œë‹¤. ìƒì„±ëœ íŒŒì¼ì€ ì‹¤ì œë¡œ CJS íŒŒì¼ì´ë¯€ë¡œ, `.snapshot.cjs` (ë˜ëŠ” ë” ê°„ë‹¨íˆ ì•„ë˜ì™€ ê°™ì´ `.snap.cjs`)ë¡œ ëë‚˜ëŠ” íŒŒì¼ëª…ì´ ë” ì ì ˆí•˜ë‹¤. ì´ëŠ” ESM í”„ë¡œì íŠ¸ì—ì„œë„ ë” ë‚˜ì€ í˜¸í™˜ì„±ì„ ì œê³µí•œë‹¤.

```js
import { basename, dirname, extname, join } from 'node:path';
import { snapshot } from 'node:test';

snapshot.setResolveSnapshotPath(generateSnapshotPath);
/**
 * @param {string} testFilePath '/tmp/foo.test.js'
 * @returns {string} '/tmp/foo.test.snap.cjs'
 */
function generateSnapshotPath(testFilePath) {
  const ext = extname(testFilePath);
  const filename = basename(testFilePath, ext);
  const base = dirname(testFilePath);

  return join(base, `${filename}.snap.cjs`);
}
```

ì•„ë˜ ì˜ˆì œëŠ” UI ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„í•œ [í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬](https://testing-library.com/)ë¥¼ ì‚¬ìš©í•œ ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤. `assert.snapshot`ì— ì ‘ê·¼í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì— ì£¼ëª©í•˜ì:

```ts
import { describe, it } from 'node:test';

import { prettyDOM } from '@testing-library/dom';
import { render } from '@testing-library/react'; // ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë“  ì‚¬ìš© ê°€ëŠ¥ (ì˜ˆ: svelte)

import { SomeComponent } from './SomeComponent.jsx';


describe('<SomeComponent>', () => {
  // "í™”ì‚´í‘œ í•¨ìˆ˜" êµ¬ë¬¸ì„ ì„ í˜¸í•œë‹¤ë©´, ì¼ê´€ì„±ì„ ìœ„í•´ ë‹¤ìŒ ë°©ì‹ì´ ë” ì¢‹ì„ ê²ƒì´ë‹¤
  it('should render defaults when no props are provided', (t) => {
    const component = render(<SomeComponent />).container.firstChild;

    t.assert.snapshot(prettyDOM(component));
  });

  it('should consume `foo` when provided', function() {
    const component = render(<SomeComponent foo="bar" />).container.firstChild;

    this.assert.snapshot(prettyDOM(component));
    // `this`ëŠ” "í™”ì‚´í‘œ í•¨ìˆ˜"ê°€ ì•„ë‹Œ ì¼ë°˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œë§Œ ë™ì‘í•œë‹¤.
  });
});
```

> âš ï¸ `assert.snapshot`ì€ `node:assert`ê°€ ì•„ë‹Œ í…ŒìŠ¤íŠ¸ ì»¨í…ìŠ¤íŠ¸(`t` ë˜ëŠ” `this`)ì—ì„œ ê°€ì ¸ì˜¨ë‹¤. ì´ëŠ” í…ŒìŠ¤íŠ¸ ì»¨í…ìŠ¤íŠ¸ê°€ `node:assert`ë¡œëŠ” ë¶ˆê°€ëŠ¥í•œ ìŠ¤ì½”í”„ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í•„ìš”í•˜ë‹¤. (`assert.snapshot`ì„ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ `snapshot(this, value)`ì²˜ëŸ¼ ìˆ˜ë™ìœ¼ë¡œ ì œê³µí•´ì•¼ í•˜ëŠ”ë°, ì´ëŠ” ë§¤ìš° ë²ˆê±°ë¡œìš¸ ê²ƒì´ë‹¤).


## ìœ ë‹› í…ŒìŠ¤íŠ¸

ìœ ë‹› í…ŒìŠ¤íŠ¸ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ í…ŒìŠ¤íŠ¸ ë°©ì‹ìœ¼ë¡œ, íŠ¹ë³„í•œ ì„¤ì •ì´ ê±°ì˜ í•„ìš”í•˜ì§€ ì•Šë‹¤. ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸ê°€ ìœ ë‹› í…ŒìŠ¤íŠ¸ì— í•´ë‹¹í•˜ë¯€ë¡œ, ì„¤ì •ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì„¤ì • ë‹¨ê³„ì—ì„œ ì‘ì€ ì„±ëŠ¥ ì €í•˜ë¼ë„ ì „ì²´ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ í° ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

```javascript
import { register } from 'node:module';

import './setup.mjs'; // ğŸ’¡ ê¸°ë³¸ ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°

register('some-plaintext-loader');
// ì´ì œ GraphQLê³¼ ê°™ì€ ì¼ë°˜ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤:
// import GET_ME from 'get-me.gql'; GET_ME = '
```

```javascript
import assert from 'node:assert/strict';
import { describe, it } from 'node:test';

import { Cat } from './Cat.js';
import { Fish } from './Fish.js';
import { Plastic } from './Plastic.js';

describe('Cat', () => {
  it('should eat fish', () => {
    const cat = new Cat();
    const fish = new Fish();

    assert.doesNotThrow(() => cat.eat(fish));
  });

  it('should NOT eat plastic', () => {
    const cat = new Cat();
    const plastic = new Plastic();

    assert.throws(() => cat.eat(plastic));
  });
});
```

## ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸

UI í…ŒìŠ¤íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ DOMê³¼ ë”ë¶ˆì–´ ë¸Œë¼ìš°ì € ê³ ìœ ì˜ API(ì•„ë˜ ì˜ˆì‹œì˜ [`IndexedDb`](https://developer.mozilla.org/docs/Web/API/IndexedDB_API)ì™€ ê°™ì€)ë¥¼ í•„ìš”ë¡œ í•œë‹¤. ì´ëŸ¬í•œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë³µì¡í•˜ê³  ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ í•„ìš”ë¡œ í•œë‹¤.

`IndexedDb`ì™€ ê°™ì€ APIë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ê·¸ ì‚¬ìš©ì´ ë§¤ìš° ì œí•œì ì¸ ê²½ìš°, ì•„ë˜ì™€ ê°™ì€ ì „ì—­ ëª©ì—…ì€ ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ëŒ€ì‹  `IndexedDb`ì— ì ‘ê·¼í•˜ëŠ” íŠ¹ì • í…ŒìŠ¤íŠ¸ ë‚´ì—ì„œë§Œ ì´ `beforeEach`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë§Œì•½ `IndexedDb`(ë˜ëŠ” ë‹¤ë¥¸ API)ì— ì ‘ê·¼í•˜ëŠ” ëª¨ë“ˆì´ ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ëœë‹¤ë©´, í•´ë‹¹ ëª¨ë“ˆì„ ëª©ì—…í•˜ê±°ë‚˜(ê¶Œì¥í•˜ëŠ” ë°©ë²•) ì´ ì„¤ì •ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```javascript
import { register } from 'node:module';

// âš ï¸ JSDom ì¸ìŠ¤í„´ìŠ¤ëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ë§Œ ìƒì„±í•´ì•¼ í•œë‹¤. ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•˜ë©´ ë§ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤
import jsdom from 'global-jsdom';

import './setup.units.mjs'; // ğŸ’¡

import { IndexedDb } from './globals/IndexedDb.js';

register('some-css-modules-loader');

jsdom(undefined, {
  url: 'https://test.example.com', // âš ï¸ URLì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ë§ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤
});

// ì „ì—­ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ëŠ” ì˜ˆì‹œ
// JSDOMì˜ `history`ëŠ” ë„¤ë¹„ê²Œì´ì…˜ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•œë‹¤. ì•„ë˜ ì½”ë“œëŠ” ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ë¥¼ ì²˜ë¦¬í•œë‹¤
const pushState = globalThis.history.pushState.bind(globalThis.history);
globalThis.history.pushState = function mock_pushState(data, unused, url) {
  pushState(data, unused, url);
  globalThis.location.assign(url);
};

beforeEach(globalUIBeforeEach);
function globalUIBeforeEach() {
  globalThis.indexedDb = new IndexedDb();
}
```

UI í…ŒìŠ¤íŠ¸ëŠ” ë‘ ê°€ì§€ ìˆ˜ì¤€ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤:
1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ ìœ ì‚¬í•œ ë°©ì‹(ì™¸ë¶€ ì˜ì¡´ì„±ì„ ëª©ì—…í•˜ëŠ” ë°©ì‹)
2. ë³´ë‹¤ ì¢…í•©ì ì¸ ì—”ë“œíˆ¬ì—”ë“œ ë°©ì‹(IndexedDbì™€ ê°™ì€ ì™¸ë¶€ ìš”ì†Œë§Œ ëª©ì—…í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì‹¤ì œë¡œ êµ¬í˜„)

ì²« ë²ˆì§¸ ë°©ì‹ì´ ì¼ë°˜ì ìœ¼ë¡œ ë” ìˆœìˆ˜í•œ í…ŒìŠ¤íŠ¸ ë°©ì‹ì´ë©°, ë‘ ë²ˆì§¸ ë°©ì‹ì€ ë³´í†µ [Playwright](https://playwright.dev/)ë‚˜ [Puppeteer](https://pptr.dev/)ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•œ ì™„ì „í•œ ì—”ë“œíˆ¬ì—”ë“œ ìë™í™” ì‚¬ìš©ì„± í…ŒìŠ¤íŠ¸ë¡œ ëŒ€ì²´ëœë‹¤. ì•„ë˜ëŠ” ì²« ë²ˆì§¸ ë°©ì‹ì˜ ì˜ˆì‹œë‹¤.

```typescript
import { before, describe, mock, it } from 'node:test';

import { screen } from '@testing-library/dom';
import { render } from '@testing-library/react'; // í”„ë ˆì„ì›Œí¬ ì„ íƒ ê°€ëŠ¥(ì˜ˆ: svelte)

// âš ï¸ SomeOtherComponentëŠ” ì •ì  ì„í¬íŠ¸ê°€ ì•„ë‹ˆë‹¤.
// ì´ëŠ” ìì²´ ì„í¬íŠ¸ë¥¼ ëª©ì—…í•˜ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤


describe('<SomeOtherComponent>', () => {
  let SomeOtherComponent;
  let calcSomeValue;

  before(async () => {
    // âš ï¸ ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤: ëª©ì—…ì€ ë°˜ë“œì‹œ ì‚¬ìš©ë˜ê¸° ì „ì— ì„¤ì •ë˜ì–´ì•¼ í•œë‹¤

    // --experimental-test-module-mocks ì˜µì…˜ì´ í•„ìš”í•˜ë‹¤
    calcSomeValue = mock.module('./calcSomeValue.js', { calcSomeValue: mock.fn() });

    ({ SomeOtherComponent } = await import('./SomeOtherComponent.jsx'));
  });

  describe('calcSomeValueê°€ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°', () => {
    // ì´ëŠ” ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤
    // ì—ëŸ¬ ë©”ì‹œì§€ì— ì¤‘ìš”í•˜ì§€ ì•Šì€ ë³€ê²½ì´ ìˆì„ ë•Œ
    // ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ê°€ ì˜ëª»ëœ ì‹¤íŒ¨ë¥¼ ë³´ê³ í•˜ê²Œ ë˜ê³ 
    // ì‹¤ì œë¡œëŠ” ë¶ˆí•„ìš”í•œ ìŠ¤ëƒ…ìƒ· ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•˜ê²Œ ëœë‹¤

    it('ë³´ê¸° ì¢‹ì€ ì—ëŸ¬ë¥¼ í‘œì‹œí•˜ë©° ì •ìƒì ìœ¼ë¡œ ì‹¤íŒ¨í•´ì•¼ í•œë‹¤', () => {
      calcSomeValue.mockImplementation(function mock__calcSomeValue() { return null });

      render(<SomeOtherComponent>);

      const errorMessage = screen.queryByText('unable');

      assert.ok(errorMessage);
    });
  });
});
```