# Table of Contents

- [Node.js: 개발 환경과 프로덕션 환경의 차이](#nodejs-개발-환경과-프로덕션-환경의-차이)
  - [NODE_ENV가 안티패턴으로 간주되는 이유](#node_env가-안티패턴으로-간주되는-이유)

# [Node.js: 개발 환경과 프로덕션 환경의 차이](https://nodejs.org/ko/learn/getting-started/ecmascript-2015-es6-and-beyond#nodejs-the-difference-between-development-and-production)

**Node.js에서는 개발 환경과 프로덕션 환경 사이에 차이가 없습니다.** 즉, Node.js가 프로덕션 환경에서 작동하도록 특별한 설정을 적용할 필요가 없습니다. 하지만 npm 레지스트리의 일부 라이브러리들은 `NODE_ENV` 변수를 인식하고 기본값을 `development`로 설정합니다. 따라서 Node.js를 실행할 때는 항상 `NODE_ENV=production`으로 설정하는 것이 좋습니다.

애플리케이션을 구성하는 인기 있는 방법 중 하나는 [12요소 방법론(twelve factor methodology)](https://12factor.net/)을 사용하는 것입니다.


## NODE_ENV가 안티패턴으로 간주되는 이유

환경(environment)은 엔지니어들이 소프트웨어 제품을 개발, 테스트, 배포, 관리할 수 있는 디지털 플랫폼 또는 시스템입니다. 일반적으로 애플리케이션이 실행되는 환경은 네 가지 단계 또는 유형으로 나뉩니다:

- 개발(Development)
- 테스트(Testing)
- 스테이징(Staging)
- 프로덕션(Production)

`NODE_ENV`의 근본적인 문제는 개발자들이 소프트웨어의 최적화와 동작을 실행 환경과 결합시키는 데서 비롯됩니다. 이로 인해 다음과 같은 코드가 작성됩니다:

```javascript
if (process.env.NODE_ENV === 'development') {
  // ...
}

if (process.env.NODE_ENV === 'production') {
  // ...
}

if (['production', 'staging'].includes(process.env.NODE_ENV)) {
  // ...
}
```

이 코드는 무해해 보일 수 있지만, 프로덕션과 스테이징 환경을 다르게 만들어 신뢰할 수 있는 테스트를 불가능하게 합니다. 예를 들어, `NODE_ENV`가 `development`로 설정되었을 때는 테스트가 통과하고 제품의 기능이 정상적으로 동작하지만, `NODE_ENV`를 `production`으로 설정하면 실패할 수 있습니다. 따라서 `NODE_ENV`를 `production` 이외의 값으로 설정하는 것은 안티패턴으로 간주됩니다.


