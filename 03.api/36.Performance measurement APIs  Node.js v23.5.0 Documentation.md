# Table of Contents

- [성능 측정 API](#성능-측정-api)
    - [`perf_hooks.performance`](#perf_hooksperformance)
      - [`performance.clearMarks([name])`](#performanceclearmarksname)
      - [`performance.clearMeasures([name])`](#performanceclearmeasuresname)
      - [`performance.clearResourceTimings([name])`](#performanceclearresourcetimingsname)
      - [`performance.eventLoopUtilization([utilization1[, utilization2]])`](#performanceeventlooputilizationutilization1-utilization2)
      - [`performance.getEntries()`](#performancegetentries)
      - [`performance.getEntriesByName(name[, type])`](#performancegetentriesbynamename-type)
      - [`performance.getEntriesByType(type)`](#performancegetentriesbytypetype)
      - [`performance.mark(name[, options])`](#performancemarkname-options)
      - [`performance.markResourceTiming(timingInfo, requestedUrl, initiatorType, global, cacheMode, bodyInfo, responseStatus[, deliveryType])`](#performancemarkresourcetimingtiminginfo-requestedurl-initiatortype-global-cachemode-bodyinfo-responsestatus-deliverytype)
      - [`performance.measure(name[, startMarkOrOptions[, endMark]])`](#performancemeasurename-startmarkoroptions-endmark)
      - [`performance.nodeTiming`](#performancenodetiming)
      - [`performance.now()`](#performancenow)
      - [`performance.setResourceTimingBufferSize(maxSize)`](#performancesetresourcetimingbuffersizemaxsize)
      - [`performance.timeOrigin`](#performancetimeorigin)
      - [`performance.timerify(fn[, options])`](#performancetimerifyfn-options)
      - [`performance.toJSON()`](#performancetojson)
        - [이벤트: `'resourcetimingbufferfull'`](#이벤트-resourcetimingbufferfull)
    - [클래스: `PerformanceEntry`](#클래스-performanceentry)
      - [`performanceEntry.duration`](#performanceentryduration)
      - [`performanceEntry.entryType`](#performanceentryentrytype)
      - [`performanceEntry.name`](#performanceentryname)
      - [`performanceEntry.startTime`](#performanceentrystarttime)
    - [클래스: `PerformanceMark`](#클래스-performancemark)
      - [`performanceMark.detail`](#performancemarkdetail)
    - [클래스: `PerformanceMeasure`](#클래스-performancemeasure)
      - [`performanceMeasure.detail`](#performancemeasuredetail)
    - [클래스: `PerformanceNodeEntry`](#클래스-performancenodeentry)
      - [`performanceNodeEntry.detail`](#performancenodeentrydetail)
      - [`performanceNodeEntry.flags`](#performancenodeentryflags)
      - [`performanceNodeEntry.kind`](#performancenodeentrykind)
      - [가비지 컬렉션('gc') 상세 정보](#가비지-컬렉션gc-상세-정보)
      - [HTTP ('http') 상세 정보](#http-http-상세-정보)
      - [HTTP/2 ('http2') 상세 정보](#http2-http2-상세-정보)
      - [Timerify('function') 상세 정보](#timerifyfunction-상세-정보)
      - [Net ('net') 상세 정보](#net-net-상세-정보)
      - [DNS ('dns') 상세 정보](#dns-dns-상세-정보)
    - [클래스: `PerformanceNodeTiming`](#클래스-performancenodetiming)
      - [`performanceNodeTiming.bootstrapComplete`](#performancenodetimingbootstrapcomplete)
      - [`performanceNodeTiming.environment`](#performancenodetimingenvironment)
      - [`performanceNodeTiming.idleTime`](#performancenodetimingidletime)
      - [`performanceNodeTiming.loopExit`](#performancenodetimingloopexit)
      - [`performanceNodeTiming.loopStart`](#performancenodetimingloopstart)
      - [`performanceNodeTiming.nodeStart`](#performancenodetimingnodestart)
      - [`performanceNodeTiming.uvMetricsInfo`](#performancenodetiminguvmetricsinfo)
      - [`performanceNodeTiming.v8Start`](#performancenodetimingv8start)
    - [클래스: `PerformanceResourceTiming`](#클래스-performanceresourcetiming)
      - [`performanceResourceTiming.workerStart`](#performanceresourcetimingworkerstart)
      - [`performanceResourceTiming.redirectStart`](#performanceresourcetimingredirectstart)
      - [`performanceResourceTiming.redirectEnd`](#performanceresourcetimingredirectend)
      - [`performanceResourceTiming.fetchStart`](#performanceresourcetimingfetchstart)
      - [`performanceResourceTiming.domainLookupStart`](#performanceresourcetimingdomainlookupstart)
      - [`performanceResourceTiming.domainLookupEnd`](#performanceresourcetimingdomainlookupend)
      - [`performanceResourceTiming.connectStart`](#performanceresourcetimingconnectstart)
      - [`performanceResourceTiming.connectEnd`](#performanceresourcetimingconnectend)
      - [`performanceResourceTiming.secureConnectionStart`](#performanceresourcetimingsecureconnectionstart)
      - [`performanceResourceTiming.requestStart`](#performanceresourcetimingrequeststart)
      - [`performanceResourceTiming.responseEnd`](#performanceresourcetimingresponseend)
      - [`performanceResourceTiming.transferSize`](#performanceresourcetimingtransfersize)
      - [`performanceResourceTiming.encodedBodySize`](#performanceresourcetimingencodedbodysize)
      - [`performanceResourceTiming.decodedBodySize`](#performanceresourcetimingdecodedbodysize)
      - [`performanceResourceTiming.toJSON()`](#performanceresourcetimingtojson)
    - [클래스: `PerformanceObserver`](#클래스-performanceobserver)
      - [`PerformanceObserver.supportedEntryTypes`](#performanceobserversupportedentrytypes)
      - [`new PerformanceObserver(callback)`](#new-performanceobservercallback)
      - [`performanceObserver.disconnect()`](#performanceobserverdisconnect)
      - [`performanceObserver.observe(options)`](#performanceobserverobserveoptions)
      - [`performanceObserver.takeRecords()`](#performanceobservertakerecords)
    - [클래스: `PerformanceObserverEntryList`](#클래스-performanceobserverentrylist)
      - [`performanceObserverEntryList.getEntries()`](#performanceobserverentrylistgetentries)
      - [`performanceObserverEntryList.getEntriesByName(name[, type])`](#performanceobserverentrylistgetentriesbynamename-type)
      - [`performanceObserverEntryList.getEntriesByType(type)`](#performanceobserverentrylistgetentriesbytypetype)
    - [`perf_hooks.createHistogram([options])`](#perf_hookscreatehistogramoptions)
    - [`perf_hooks.monitorEventLoopDelay([options])`](#perf_hooksmonitoreventloopdelayoptions)
    - [클래스: `Histogram`](#클래스-histogram)
      - [`histogram.count`](#histogramcount)
      - [`histogram.countBigInt`](#histogramcountbigint)
      - [`histogram.exceeds`](#histogramexceeds)
      - [`histogram.exceedsBigInt`](#histogramexceedsbigint)
      - [`histogram.max`](#histogrammax)
      - [`histogram.maxBigInt`](#histogrammaxbigint)
      - [`histogram.mean`](#histogrammean)
      - [`histogram.min`](#histogrammin)
      - [`histogram.minBigInt`](#histogramminbigint)
      - [`histogram.percentile(percentile)`](#histogrampercentilepercentile)
      - [`histogram.percentileBigInt(percentile)`](#histogrampercentilebigintpercentile)
      - [`histogram.percentiles`](#histogrampercentiles)
      - [`histogram.percentilesBigInt`](#histogrampercentilesbigint)
      - [`histogram.reset()`](#histogramreset)
      - [`histogram.stddev`](#histogramstddev)
    - [클래스: `IntervalHistogram extends Histogram`](#클래스-intervalhistogram-extends-histogram)
      - [`histogram.disable()`](#histogramdisable)
      - [`histogram.enable()`](#histogramenable)
      - [`IntervalHistogram` 복제하기](#intervalhistogram-복제하기)
    - [클래스: `RecordableHistogram` (Histogram 상속)](#클래스-recordablehistogram-histogram-상속)
      - [`histogram.add(other)`](#histogramaddother)
      - [`histogram.record(val)`](#histogramrecordval)
      - [`histogram.recordDelta()`](#histogramrecorddelta)
    - [Examples](#examples)
      - [비동기 작업의 지속 시간 측정하기](#비동기-작업의-지속-시간-측정하기)
      - [의존성 로딩 시간 측정하기](#의존성-로딩-시간-측정하기)
      - [HTTP 왕복 시간 측정하기](#http-왕복-시간-측정하기)
      - [TCP 연결 성공 시 `net.connect` 소요 시간 측정하기](#tcp-연결-성공-시-netconnect-소요-시간-측정하기)
      - [DNS 요청이 성공할 때 걸리는 시간 측정하기](#dns-요청이-성공할-때-걸리는-시간-측정하기)

# 성능 측정 API

**소스 코드:** [lib/perf\_hooks.js](https://github.com/nodejs/node/blob/v23.5.0/lib/perf_hooks.js)

이 모듈은 W3C [Web Performance APIs](https://w3c.github.io/perf-timing-primer/)의 일부를 구현하며, Node.js 전용 성능 측정을 위한 추가 API를 제공합니다.

Node.js는 다음과 같은 [Web Performance APIs](https://w3c.github.io/perf-timing-primer/)를 지원합니다:

-   [High Resolution Time](https://www.w3.org/TR/hr-time-2)
-   [Performance Timeline](https://w3c.github.io/performance-timeline/)
-   [User Timing](https://www.w3.org/TR/user-timing/)
-   [Resource Timing](https://www.w3.org/TR/resource-timing-2/)

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((items) => {
    console.log(items.getEntries()[0].duration);
    performance.clearMarks();
});

obs.observe({ type: 'measure' });

performance.measure('Start to Now');
performance.mark('A');

doSomeLongRunningProcess(() => {
    performance.measure('A to Now', 'A');
    performance.mark('B');
    performance.measure('A to B', 'A', 'B');
});
```


### `perf_hooks.performance`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#perf_hooksperformance)

추가된 버전: v8.5.0

이 객체는 현재 Node.js 인스턴스에서 성능 메트릭을 수집하는 데 사용할 수 있습니다. 브라우저의 [`window.performance`](https://developer.mozilla.org/en-US/docs/Web/API/Window/performance)와 유사한 기능을 제공합니다.


#### `performance.clearMarks([name])`

- `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

`name` 인자를 제공하지 않으면, Performance Timeline에서 모든 `PerformanceMark` 객체를 제거합니다. `name` 인자를 제공하면, 해당 이름을 가진 마크만 제거합니다.


#### `performance.clearMeasures([name])`

- `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

`name` 인자를 제공하지 않으면, Performance Timeline에서 모든 `PerformanceMeasure` 객체를 제거합니다. `name` 인자를 제공하면, 해당 이름을 가진 측정값만 제거합니다.

```javascript
// 모든 측정값 제거
performance.clearMeasures();

// 특정 이름을 가진 측정값 제거
performance.clearMeasures('myMeasure');
```


#### `performance.clearResourceTimings([name])`

- `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

`name` 인자를 제공하지 않으면, 리소스 타임라인에서 모든 `PerformanceResourceTiming` 객체를 제거합니다. `name` 인자를 제공하면, 해당 이름의 리소스만 제거합니다.


#### `performance.eventLoopUtilization([utilization1[, utilization2]])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceeventlooputilizationutilization1-utilization2)

추가된 버전: v14.10.0, v12.19.0

-   `utilization1` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) 이전에 호출한 `eventLoopUtilization()`의 결과.
-   `utilization2` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) `utilization1` 이전에 호출한 `eventLoopUtilization()`의 결과.
-   반환값: [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `idle` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)
    -   `active` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)
    -   `utilization` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

`eventLoopUtilization()` 메서드는 이벤트 루프가 idle 상태와 active 상태로 있었던 누적 시간을 고해상도 밀리초 타이머로 반환합니다. `utilization` 값은 계산된 이벤트 루프 사용률(ELU)입니다.

메인 스레드에서 부트스트랩이 아직 완료되지 않았다면, 속성 값은 `0`입니다. ELU는 [Worker 스레드](https://nodejs.org/docs/latest/api/worker_threads.html#worker-threads)에서 즉시 사용 가능합니다. 부트스트랩이 이벤트 루프 내에서 발생하기 때문입니다.

`utilization1`과 `utilization2`는 모두 선택적 매개변수입니다.

`utilization1`이 전달되면, 현재 호출의 `active`와 `idle` 시간 사이의 차이와 해당 `utilization` 값이 계산되어 반환됩니다. 이는 [`process.hrtime()`](https://nodejs.org/docs/latest/api/process.html#processhrtimetime)과 유사합니다.

`utilization1`과 `utilization2`가 모두 전달되면, 두 인자 사이의 차이가 계산됩니다. 이는 편의를 위한 옵션입니다. [`process.hrtime()`](https://nodejs.org/docs/latest/api/process.html#processhrtimetime)과 달리 ELU 계산은 단순한 뺄셈보다 복잡하기 때문입니다.

ELU는 CPU 사용률과 유사하지만, CPU 사용량이 아닌 이벤트 루프 통계만 측정합니다. 이는 이벤트 루프가 이벤트 프로바이더(예: `epoll_wait`) 외부에서 보낸 시간의 백분율을 나타냅니다. 다른 CPU idle 시간은 고려되지 않습니다. 다음은 대부분 idle 상태인 프로세스가 높은 ELU를 가지는 예제입니다.

```js
import { eventLoopUtilization } from 'node:perf_hooks';
import { spawnSync } from 'node:child_process';

setImmediate(() => {
    const elu = eventLoopUtilization();
    spawnSync('sleep', ['5']);
    console.log(eventLoopUtilization(elu).utilization);
});
```

이 스크립트를 실행하는 동안 CPU는 대부분 idle 상태이지만, `utilization` 값은 `1`입니다. 이는 [`child_process.spawnSync()`](https://nodejs.org/docs/latest/api/child_process.html#child_processspawnsynccommand-args-options) 호출이 이벤트 루프를 차단하기 때문입니다.

이전 `eventLoopUtilization()` 호출 결과 대신 사용자 정의 객체를 전달하면 정의되지 않은 동작이 발생합니다. 반환 값이 이벤트 루프의 정확한 상태를 반영한다고 보장할 수 없습니다.


#### `performance.getEntries()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancegetentries)

-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.startTime`을 기준으로 시간 순서대로 정렬된 `PerformanceEntry` 객체 목록을 반환합니다. 특정 타입이나 이름을 가진 성능 항목만 필요하다면, `performance.getEntriesByType()`과 `performance.getEntriesByName()`을 사용하세요.


#### `performance.getEntriesByName(name[, type])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancegetentriesbynamename-type)

-   `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.name`이 `name`과 일치하고, 선택적으로 `performanceEntry.entryType`이 `type`과 일치하는 `PerformanceEntry` 객체들을 `performanceEntry.startTime` 기준으로 시간 순서대로 반환합니다.


#### `performance.getEntriesByType(type)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancegetentriesbytypetype)

-   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.entryType`이 `type`과 일치하는 `PerformanceEntry` 객체들을 `performanceEntry.startTime` 기준으로 시간순으로 정렬한 목록을 반환합니다.


#### `performance.mark(name[, options])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancemarkname-options)

-   `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `detail` [`<any>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types) 마크와 함께 포함할 추가적인 세부 정보.
    -   `startTime` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 마크 시간으로 사용할 선택적 타임스탬프. **기본값**: `performance.now()`.

Performance Timeline에 새로운 `PerformanceMark` 엔트리를 생성합니다. `PerformanceMark`는 `PerformanceEntry`의 하위 클래스로, `performanceEntry.entryType`은 항상 `'mark'`이고 `performanceEntry.duration`은 항상 `0`입니다. Performance 마크는 Performance Timeline에서 특정 중요한 시점을 표시하는 데 사용됩니다.

생성된 `PerformanceMark` 엔트리는 전역 Performance Timeline에 추가되며, `performance.getEntries`, `performance.getEntriesByName`, `performance.getEntriesByType`을 통해 조회할 수 있습니다. 관찰이 완료되면, 전역 Performance Timeline에서 엔트리를 수동으로 제거하기 위해 `performance.clearMarks`를 사용해야 합니다.


#### `performance.markResourceTiming(timingInfo, requestedUrl, initiatorType, global, cacheMode, bodyInfo, responseStatus[, deliveryType])`

-   `timingInfo` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) [Fetch Timing Info](https://fetch.spec.whatwg.org/#fetch-timing-info)
-   `requestedUrl` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 리소스의 URL
-   `initiatorType` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 리소스를 요청한 주체의 이름, 예: 'fetch'
-   `global` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
-   `cacheMode` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 캐시 모드. 빈 문자열('') 또는 'local'이어야 함
-   `bodyInfo` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) [Fetch Response Body Info](https://fetch.spec.whatwg.org/#response-body-info)
-   `responseStatus` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 응답 상태 코드
-   `deliveryType` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 전달 타입. **기본값:** `''`

*이 기능은 Node.js에서 확장된 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

이 메서드는 리소스 타임라인에 새로운 `PerformanceResourceTiming` 항목을 생성합니다. `PerformanceResourceTiming`은 `PerformanceEntry`의 하위 클래스로, `performanceEntry.entryType`이 항상 `'resource'`로 설정됩니다. 이 리소스는 리소스 타임라인에서 특정 시점을 표시하는 데 사용됩니다.

생성된 `PerformanceMark` 항목은 전역 리소스 타임라인에 추가되며, `performance.getEntries`, `performance.getEntriesByName`, `performance.getEntriesByType`을 통해 조회할 수 있습니다. 관찰이 완료되면, 전역 Performance 타임라인에서 항목을 수동으로 제거하기 위해 `performance.clearResourceTimings`를 사용해야 합니다.


#### `performance.measure(name[, startMarkOrOptions[, endMark]])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancemeasurename-startmarkoroptions-endmark)

-   `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `startMarkOrOptions` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) 선택 사항.
    -   `detail` [`<any>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types) 측정에 포함할 추가적인 세부 정보.
    -   `duration` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 시작과 종료 시간 사이의 지속 시간.
    -   `end` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 종료 시간으로 사용할 타임스탬프 또는 이전에 기록된 마크를 식별하는 문자열.
    -   `start` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 시작 시간으로 사용할 타임스탬프 또는 이전에 기록된 마크를 식별하는 문자열.
-   `endMark` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 선택 사항. `startMarkOrOptions`가 [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)인 경우 생략해야 함.

Performance Timeline에 새로운 `PerformanceMeasure` 항목을 생성합니다. `PerformanceMeasure`는 `PerformanceEntry`의 하위 클래스로, `performanceEntry.entryType`은 항상 `'measure'`이며, `performanceEntry.duration`은 `startMark`와 `endMark` 사이의 경과 시간을 밀리초 단위로 측정합니다.

`startMark` 인자는 Performance Timeline에 있는 기존의 `PerformanceMark`를 식별하거나 `PerformanceNodeTiming` 클래스에서 제공하는 타임스탬프 속성을 식별할 수 있습니다. 지정된 `startMark`가 존재하지 않으면 오류가 발생합니다.

선택 사항인 `endMark` 인자는 Performance Timeline에 있는 기존의 `PerformanceMark`를 식별하거나 `PerformanceNodeTiming` 클래스에서 제공하는 타임스탬프 속성을 식별해야 합니다. `endMark`는 매개변수가 전달되지 않으면 `performance.now()`가 되며, 지정된 `endMark`가 존재하지 않으면 오류가 발생합니다.

생성된 `PerformanceMeasure` 항목은 전역 Performance Timeline에 추가되며, `performance.getEntries`, `performance.getEntriesByName`, `performance.getEntriesByType`을 통해 쿼리할 수 있습니다. 관찰이 완료되면 전역 Performance Timeline에서 항목을 수동으로 `performance.clearMeasures`를 사용하여 제거해야 합니다.


#### `performance.nodeTiming`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetiming)

추가된 버전: v8.5.0

- [`<PerformanceNodeTiming>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performancenodetiming)

*이 속성은 Node.js에서 확장된 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

`PerformanceNodeTiming` 클래스의 인스턴스로, Node.js의 특정 운영 단계에 대한 성능 메트릭을 제공합니다.


#### `performance.now()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenow)

-   반환값: [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

현재의 고해상도 밀리초 타임스탬프를 반환합니다. 여기서 0은 현재 `node` 프로세스의 시작을 나타냅니다.


#### `performance.setResourceTimingBufferSize(maxSize)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancesetresourcetimingbuffersizemaxsize)

이 메서드는 전역 성능 리소스 타이밍 버퍼 크기를 지정된 수의 "resource" 타입 성능 엔트리 객체로 설정합니다.

기본적으로 최대 버퍼 크기는 250으로 설정되어 있습니다.


#### `performance.timeOrigin`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancetimeorigin)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

[`timeOrigin`](https://w3c.github.io/hr-time/#dom-performance-timeorigin)은 현재 `node` 프로세스가 시작된 시점의 고해상도 밀리초 타임스탬프를 Unix 시간으로 지정합니다.


#### `performance.timerify(fn[, options])`

- `fn` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
- `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
  - `histogram` [`<RecordableHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-recordablehistogram-extends-histogram) `perf_hooks.createHistogram()`로 생성된 히스토그램 객체로, 실행 시간을 나노초 단위로 기록합니다.

*이 기능은 Node.js의 확장 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

이 함수는 주어진 함수를 새로운 함수로 감싸서, 감싼 함수의 실행 시간을 측정합니다. 시간 측정 결과를 확인하려면 `PerformanceObserver`가 `'function'` 이벤트 타입을 구독해야 합니다.

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

function someFunction() {
    console.log('hello world');
}

const wrapped = performance.timerify(someFunction);

const obs = new PerformanceObserver((list) => {
    console.log(list.getEntries()[0].duration);
    performance.clearMarks();
    performance.clearMeasures();
    obs.disconnect();
});

obs.observe({ entryTypes: ['function'] });

// 성능 타임라인 항목이 생성됩니다
wrapped();
```

감싼 함수가 Promise를 반환하는 경우, `finally` 핸들러가 Promise에 연결되고, `finally` 핸들러가 호출되면 실행 시간이 보고됩니다.


#### `performance.toJSON()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancetojson)

`performance.toJSON()`은 `performance` 객체의 JSON 표현을 반환합니다. 이 메서드는 브라우저의 [`window.performance.toJSON`](https://developer.mozilla.org/en-US/docs/Web/API/Performance/toJSON)과 유사하게 동작합니다.


##### 이벤트: `'resourcetimingbufferfull'`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#event-resourcetimingbufferfull)

추가된 버전: v18.8.0

`'resourcetimingbufferfull'` 이벤트는 전역 성능 리소스 타이밍 버퍼가 가득 찼을 때 발생합니다. 이벤트 리스너에서 `performance.setResourceTimingBufferSize()`를 사용해 리소스 타이밍 버퍼 크기를 조정하거나 `performance.clearResourceTimings()`로 버퍼를 비워 성능 타임라인 버퍼에 더 많은 항목을 추가할 수 있습니다.


### 클래스: `PerformanceEntry`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

추가된 버전: v8.5.0

이 클래스의 생성자는 사용자에게 직접 노출되지 않습니다.


#### `performanceEntry.duration`

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 항목에 대해 경과된 총 밀리초 수를 나타냅니다. 이 값은 모든 Performance Entry 타입에 대해 의미가 있는 것은 아닙니다.


#### `performanceEntry.entryType`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceentryentrytype)

-   [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

성능 항목의 타입을 나타냅니다. 다음 중 하나일 수 있습니다:

-   `'dns'` (Node.js 전용)
-   `'function'` (Node.js 전용)
-   `'gc'` (Node.js 전용)
-   `'http2'` (Node.js 전용)
-   `'http'` (Node.js 전용)
-   `'mark'` (웹에서 사용 가능)
-   `'measure'` (웹에서 사용 가능)
-   `'net'` (Node.js 전용)
-   `'node'` (Node.js 전용)
-   `'resource'` (웹에서 사용 가능)


#### `performanceEntry.name`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceentryname)

-   [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

성능 항목의 이름을 나타냅니다.


#### `performanceEntry.startTime`

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

`performanceEntry.startTime`은 `Performance Entry`의 시작 시간을 나타내는 고해상도 밀리초 단위의 타임스탬프입니다.


### 클래스: `PerformanceMark`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performancemark)

추가된 버전: v18.2.0, v16.17.0

-   상속: [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`Performance.mark()` 메서드를 통해 생성된 마크를 노출합니다.


#### `performanceMark.detail`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancemarkdetail)

-   [`<any>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types)

`Performance.mark()` 메서드를 사용하여 생성할 때 지정된 추가 세부 정보입니다.


### 클래스: `PerformanceMeasure`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performancemeasure)

추가된 버전: v18.2.0, v16.17.0

-   상속: [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`Performance.measure()` 메서드를 통해 생성된 측정값을 제공합니다.

이 클래스의 생성자는 사용자에게 직접 노출되지 않습니다.


#### `performanceMeasure.detail`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancemeasuredetail)

-   [`<any>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types)

`Performance.measure()` 메서드를 사용하여 생성할 때 지정된 추가 세부 정보입니다.


### 클래스: `PerformanceNodeEntry`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performancenodeentry)

추가된 버전: v19.0.0

-   상속: [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

*이 클래스는 Node.js에서 확장된 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

Node.js의 상세한 타이밍 데이터를 제공합니다.

이 클래스의 생성자는 사용자에게 직접 노출되지 않습니다.


#### `performanceNodeEntry.detail`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodeentrydetail)

-   [`<any>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types)

`entryType`에 따라 특정한 추가 정보를 담고 있습니다.


#### `performanceNodeEntry.flags`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodeentryflags)

[안정성: 0](https://nodejs.org/docs/latest/api/documentation.html#stability-index) - **사용 중단**: 대신 `performanceNodeEntry.detail`을 사용하세요.

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

`performanceEntry.entryType`이 `'gc'`일 때, `performance.flags` 속성은 가비지 컬렉션 작업에 대한 추가 정보를 포함합니다. 값은 다음 중 하나일 수 있습니다:

-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_NO`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_FORCED`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE`


#### `performanceNodeEntry.kind`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodeentrykind)

[안정성: 0](https://nodejs.org/docs/latest/api/documentation.html#stability-index) - **사용 중단됨**: 대신 `performanceNodeEntry.detail`을 사용하세요.

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

`performanceEntry.entryType`이 `'gc'`일 때, `performance.kind` 속성은 발생한 가비지 컬렉션 작업의 타입을 식별합니다. 이 값은 다음 중 하나일 수 있습니다:

-   `perf_hooks.constants.NODE_PERFORMANCE_GC_MAJOR`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_MINOR`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_INCREMENTAL`
-   `perf_hooks.constants.NODE_PERFORMANCE_GC_WEAKCB`


#### 가비지 컬렉션('gc') 상세 정보

`performanceEntry.type`이 `'gc'`일 때, `performanceNodeEntry.detail` 속성은 두 가지 속성을 가진 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)가 됩니다.

- `kind` [숫자](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 중 하나:
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_MAJOR`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_MINOR`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_INCREMENTAL`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_WEAKCB`
- `flags` [숫자](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 중 하나:
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_NO`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_FORCED`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY`
    - `perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE`


#### HTTP ('http') 상세 정보

`performanceEntry.type`이 `'http'`일 때, `performanceNodeEntry.detail` 속성은 추가 정보를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)가 됩니다.

`performanceEntry.name`이 `HttpClient`인 경우, `detail`은 `req`와 `res` 속성을 포함합니다. `req` 속성은 `method`, `url`, `headers`를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)이며, `res` 속성은 `statusCode`, `statusMessage`, `headers`를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)입니다.

`performanceEntry.name`이 `HttpRequest`인 경우, `detail`은 `req`와 `res` 속성을 포함합니다. `req` 속성은 `method`, `url`, `headers`를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)이며, `res` 속성은 `statusCode`, `statusMessage`, `headers`를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)입니다.

이 기능은 추가 메모리 오버헤드를 발생시킬 수 있으므로, 진단 목적으로만 사용해야 하며 프로덕션 환경에서는 기본적으로 활성화하지 않는 것이 좋습니다.


#### HTTP/2 ('http2') 상세 정보

`performanceEntry.type`이 `'http2'`일 때, `performanceNodeEntry.detail` 속성은 추가적인 성능 정보를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)가 됩니다.

`performanceEntry.name`이 `Http2Stream`인 경우, `detail`은 다음 속성들을 포함합니다:

-   `bytesRead` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 이 `Http2Stream`에서 수신된 `DATA` 프레임의 바이트 수입니다.
-   `bytesWritten` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 이 `Http2Stream`에서 전송된 `DATA` 프레임의 바이트 수입니다.
-   `id` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 연결된 `Http2Stream`의 식별자입니다.
-   `timeToFirstByte` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `PerformanceEntry`의 `startTime`과 첫 번째 `DATA` 프레임 수신 사이의 경과 시간(밀리초)입니다.
-   `timeToFirstByteSent` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `PerformanceEntry`의 `startTime`과 첫 번째 `DATA` 프레임 전송 사이의 경과 시간(밀리초)입니다.
-   `timeToFirstHeader` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `PerformanceEntry`의 `startTime`과 첫 번째 헤더 수신 사이의 경과 시간(밀리초)입니다.

`performanceEntry.name`이 `Http2Session`인 경우, `detail`은 다음 속성들을 포함합니다:

-   `bytesRead` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 이 `Http2Session`에서 수신된 바이트 수입니다.
-   `bytesWritten` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 이 `Http2Session`에서 전송된 바이트 수입니다.
-   `framesReceived` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `Http2Session`에서 수신된 HTTP/2 프레임의 수입니다.
-   `framesSent` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `Http2Session`에서 전송된 HTTP/2 프레임의 수입니다.
-   `maxConcurrentStreams` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `Http2Session`의 수명 동안 동시에 열린 스트림의 최대 수입니다.
-   `pingRTT` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `PING` 프레임 전송과 그 응답 수신 사이의 경과 시간(밀리초)입니다. `Http2Session`에서 `PING` 프레임이 전송된 경우에만 존재합니다.
-   `streamAverageDuration` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): 모든 `Http2Stream` 인스턴스의 평균 지속 시간(밀리초)입니다.
-   `streamCount` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type): `Http2Session`에서 처리된 `Http2Stream` 인스턴스의 수입니다.
-   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type): `Http2Session`의 타입을 나타내는 `'server'` 또는 `'client'`입니다.


#### Timerify('function') 상세 정보[#](https://nodejs.org/docs/latest/api/perf_hooks.html#timerify-function-details)

`performanceEntry.type`이 `'function'`일 때, `performanceNodeEntry.detail` 속성은 타이밍이 측정된 함수에 전달된 입력 인자들을 나열한 [`<Array>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)가 됩니다.


#### Net ('net') 상세 정보

`performanceEntry.type`이 `'net'`일 때, `performanceNodeEntry.detail` 속성은 추가 정보를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)가 됩니다.

만약 `performanceEntry.name`이 `connect`라면, `detail`은 다음과 같은 속성을 포함합니다: `host`, `port`.


#### DNS ('dns') 상세 정보

`performanceEntry.type`이 `'dns'`일 때, `performanceNodeEntry.detail` 속성은 추가 정보를 포함하는 [객체](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)가 됩니다.

`performanceEntry.name`이 `lookup`인 경우, `detail`은 다음과 같은 속성을 포함합니다: `hostname`, `family`, `hints`, `verbatim`, `addresses`.

`performanceEntry.name`이 `lookupService`인 경우, `detail`은 다음과 같은 속성을 포함합니다: `host`, `port`, `hostname`, `service`.

`performanceEntry.name`이 `queryxxx` 또는 `getHostByAddr`인 경우, `detail`은 다음과 같은 속성을 포함합니다: `host`, `ttl`, `result`. `result`의 값은 `queryxxx` 또는 `getHostByAddr`의 결과와 동일합니다.


### 클래스: `PerformanceNodeTiming`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performancenodetiming)

추가된 버전: v8.5.0

-   상속: [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

*이 속성은 Node.js에서 확장된 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

Node.js 자체의 타이밍 정보를 제공합니다. 이 클래스의 생성자는 사용자에게 노출되지 않습니다.


#### `performanceNodeTiming.bootstrapComplete`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingbootstrapcomplete)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

Node.js 프로세스가 부트스트래핑을 완료한 시점의 고해상도 밀리초 타임스탬프입니다. 만약 부트스트래핑이 아직 완료되지 않았다면, 이 속성의 값은 -1입니다.


#### `performanceNodeTiming.environment`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingenvironment)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

Node.js 환경이 초기화된 시점의 고해상도 밀리초 타임스탬프입니다.


#### `performanceNodeTiming.idleTime`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingidletime)

추가된 버전: v14.10.0, v12.19.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이벤트 루프가 이벤트 프로바이더(예: `epoll_wait`) 내에서 유휴 상태로 있었던 시간을 밀리초 단위의 고해상도 타임스탬프로 나타냅니다. 이 값은 CPU 사용량을 고려하지 않습니다. 이벤트 루프가 아직 시작되지 않은 경우(예: 메인 스크립트의 첫 번째 틱), 이 속성의 값은 0입니다.


#### `performanceNodeTiming.loopExit`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingloopexit)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

Node.js 이벤트 루프가 종료된 시점의 고해상도 밀리초 타임스탬프입니다. 이벤트 루프가 아직 종료되지 않았다면, 이 속성은 -1 값을 가집니다. 이 속성이 -1이 아닌 값을 가질 수 있는 유일한 경우는 [`'exit'`](https://nodejs.org/docs/latest/api/process.html#event-exit) 이벤트 핸들러 내부입니다.


#### `performanceNodeTiming.loopStart`

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 속성은 Node.js 이벤트 루프가 시작된 시점의 고해상도 밀리초 타임스탬프를 나타냅니다. 만약 이벤트 루프가 아직 시작되지 않았다면(예: 메인 스크립트의 첫 번째 틱에서), 이 속성은 -1 값을 가집니다.


#### `performanceNodeTiming.nodeStart`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingnodestart)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

Node.js 프로세스가 초기화된 시점의 고해상도 밀리초 타임스탬프입니다.


#### `performanceNodeTiming.uvMetricsInfo`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetiminguvmetricsinfo)

추가된 버전: v22.8.0, v20.18.0

-   반환값: [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `loopCount` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 이벤트 루프 반복 횟수
    -   `events` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 이벤트 핸들러가 처리한 이벤트 수
    -   `eventsWaiting` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 이벤트 프로바이더가 호출될 때 처리 대기 중이던 이벤트 수

이 속성은 `uv_metrics_info` 함수를 감싼 래퍼입니다. 현재 이벤트 루프 메트릭을 반환합니다.

현재 루프 반복 동안 예약된 모든 작업이 완료되기 전에 메트릭을 수집하지 않도록, `setImmediate`를 사용해 예약된 함수 내에서 이 속성을 사용하는 것이 권장됩니다.

```js
import { performance } from 'node:perf_hooks';

setImmediate(() => {
    console.log(performance.nodeTiming.uvMetricsInfo);
});
```


#### `performanceNodeTiming.v8Start`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performancenodetimingv8start)

추가된 버전: v8.5.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

V8 플랫폼이 초기화된 시점의 고해상도 밀리초 타임스탬프를 나타냅니다.


### 클래스: `PerformanceResourceTiming`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceresourcetiming)

추가된 버전: v18.2.0, v16.17.0

-   상속: [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

애플리케이션 리소스 로딩과 관련된 상세한 네트워크 타이밍 데이터를 제공합니다.

이 클래스의 생성자는 사용자에게 직접 노출되지 않습니다.


#### `performanceResourceTiming.workerStart`

- **[`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)**

`fetch` 요청을 보내기 직전의 고해상도 밀리초 타임스탬프를 나타냅니다. 만약 리소스가 워커에 의해 가로채지 않았다면, 이 속성은 항상 0을 반환합니다.


#### `performanceResourceTiming.redirectStart`

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

리다이렉트를 시작하는 fetch 작업의 시작 시간을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.redirectEnd`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingredirectend)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

마지막 리다이렉트 응답의 마지막 바이트를 받은 직후 생성되는 고해상도 밀리초 단위의 타임스탬프입니다.


#### `performanceResourceTiming.fetchStart`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingfetchstart)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

Node.js가 리소스를 가져오기 시작하기 직전의 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.domainLookupStart`

- **[`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)**

이 속성은 Node.js가 리소스의 도메인 이름 조회를 시작하기 직전의 고해상도 밀리초 타임스탬프를 나타냅니다.


#### `performanceResourceTiming.domainLookupEnd`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingdomainlookupend)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 속성은 Node.js가 리소스에 대한 도메인 이름 조회를 완료한 직후의 시간을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.connectStart`

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 값은 Node.js가 리소스를 가져오기 위해 서버와의 연결을 시작하기 직전의 시간을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.connectEnd`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingconnectend)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 값은 Node.js가 서버와의 연결을 완료한 직후의 시간을 나타내는 고해상도 밀리초 타임스탬프입니다. 이는 리소스를 가져오기 위해 서버와의 연결이 성공적으로 이루어진 시점을 기록합니다.


#### `performanceResourceTiming.secureConnectionStart`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingsecureconnectionstart)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 값은 Node.js가 현재 연결을 보호하기 위해 핸드셰이크 과정을 시작하기 직전의 시간을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.requestStart`

- **[`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)**

이 값은 Node.js가 서버로부터 응답의 첫 번째 바이트를 받기 직전의 시간을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.responseEnd`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingresponseend)

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 값은 Node.js가 리소스의 마지막 바이트를 받은 직후 또는 전송 연결이 닫히기 직전 중 더 먼저 발생한 시점을 나타내는 고해상도 밀리초 타임스탬프입니다.


#### `performanceResourceTiming.transferSize`

- **[`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)**

이 속성은 가져온 리소스의 크기를 나타내는 숫자입니다. 크기는 응답 헤더 필드와 응답 본문을 모두 포함합니다. 단위는 옥텟(octet)으로 표시됩니다.


#### `performanceResourceTiming.encodedBodySize`

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 속성은 페치(HTTP 또는 캐시)를 통해 받은 페이로드 본문의 크기를 옥텟(octet) 단위로 나타냅니다. 이 값은 콘텐츠 인코딩이 적용된 상태에서의 크기를 의미하며, 인코딩이 제거되기 전의 크기를 반영합니다.


#### `performanceResourceTiming.decodedBodySize`

- **[`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)**

이 속성은 HTTP나 캐시에서 가져온 메시지 본문의 크기를 나타냅니다. 이 크기는 콘텐츠 인코딩이 제거된 후의 크기로, 옥텟(octet) 단위로 표시됩니다.


#### `performanceResourceTiming.toJSON()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceresourcetimingtojson)

`PerformanceResourceTiming` 객체의 JSON 표현을 담은 `object`를 반환합니다.


### 클래스: `PerformanceObserver`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceobserver)

추가된 버전: v8.5.0


#### `PerformanceObserver.supportedEntryTypes`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserversupportedentrytypes)

추가된 버전: v16.0.0

-   [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

지원되는 타입을 가져옵니다.


#### `new PerformanceObserver(callback)`

- `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
  - `list` [`<PerformanceObserverEntryList>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceobserverentrylist)
  - `observer` [`<PerformanceObserver>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceobserver)

`PerformanceObserver` 객체는 새로운 `PerformanceEntry` 인스턴스가 Performance Timeline에 추가될 때 알림을 제공합니다.

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((list, observer) => {
  console.log(list.getEntries());
  performance.clearMarks();
  performance.clearMeasures();
  observer.disconnect();
});

obs.observe({ entryTypes: ['mark'], buffered: true });
performance.mark('test');
```

`PerformanceObserver` 인스턴스는 자체적인 추가적인 성능 오버헤드를 발생시키기 때문에, 알림을 무한정 구독 상태로 두면 안 됩니다. 사용자는 더 이상 필요하지 않을 때 관찰자를 즉시 해제해야 합니다.

`callback`은 `PerformanceObserver`가 새로운 `PerformanceEntry` 인스턴스에 대해 알림을 받을 때 호출됩니다. 이 콜백은 `PerformanceObserverEntryList` 인스턴스와 `PerformanceObserver`에 대한 참조를 받습니다.


#### `performanceObserver.disconnect()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserverdisconnect)

추가된 버전: v8.5.0

`PerformanceObserver` 인스턴스를 모든 알림에서 연결 해제합니다.


#### `performanceObserver.observe(options)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserverobserveoptions)

-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 단일 [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry) 타입. `entryTypes`가 이미 지정된 경우에는 사용할 수 없음.
    -   `entryTypes` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 관찰자가 관심을 가지는 [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry) 인스턴스의 타입을 식별하는 문자열 배열. 제공되지 않으면 오류가 발생함.
    -   `buffered` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) true인 경우, 관찰자 콜백은 버퍼링된 전역 `PerformanceEntry` 목록과 함께 호출됨. false인 경우, 해당 시점 이후에 생성된 `PerformanceEntry`만 관찰자 콜백으로 전송됨. **기본값:** `false`.

[`<PerformanceObserver>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceobserver) 인스턴스를 `options.entryTypes` 또는 `options.type`으로 식별된 새로운 [`<PerformanceEntry>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry) 인스턴스 알림에 구독함:

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((list, observer) => {
    // 비동기적으로 한 번 호출됨. `list`는 세 개의 항목을 포함함.
});

obs.observe({ type: 'mark' });

for (let n = 0; n < 3; n++) {
    performance.mark(`test${n}`);
}
```


#### `performanceObserver.takeRecords()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobservertakerecords)

추가된 버전: v16.0.0

-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)  
    현재 성능 관찰자(performance observer)에 저장된 엔트리 목록을 반환하고, 목록을 비웁니다.


### 클래스: `PerformanceObserverEntryList`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceobserverentrylist)

추가된 버전: v8.5.0

`PerformanceObserverEntryList` 클래스는 `PerformanceObserver`에 전달된 `PerformanceEntry` 인스턴스에 접근할 수 있도록 제공됩니다. 이 클래스의 생성자는 사용자에게 노출되지 않습니다.


#### `performanceObserverEntryList.getEntries()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserverentrylistgetentries)

추가된 버전: v8.5.0

-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.startTime`을 기준으로 시간 순서대로 정렬된 `PerformanceEntry` 객체 목록을 반환합니다.

```javascript
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((perfObserverList, observer) => {
    console.log(perfObserverList.getEntries());
    /**
     * [
     *   PerformanceEntry {
     *     name: 'test',
     *     entryType: 'mark',
     *     startTime: 81.465639,
     *     duration: 0,
     *     detail: null
     *   },
     *   PerformanceEntry {
     *     name: 'meow',
     *     entryType: 'mark',
     *     startTime: 81.860064,
     *     duration: 0,
     *     detail: null
     *   }
     * ]
     */
    performance.clearMarks();
    performance.clearMeasures();
    observer.disconnect();
});

obs.observe({ type: 'mark' });
performance.mark('test');
performance.mark('meow');
```


#### `performanceObserverEntryList.getEntriesByName(name[, type])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserverentrylistgetentriesbynamename-type)

추가된 버전: v8.5.0

-   `name` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.name`이 `name`과 일치하고, 선택적으로 `performanceEntry.entryType`이 `type`과 일치하는 `PerformanceEntry` 객체들을 `performanceEntry.startTime` 기준으로 시간순으로 정렬한 목록을 반환합니다.

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((perfObserverList, observer) => {
    console.log(perfObserverList.getEntriesByName('meow'));
    /** 
     * [ 
     *   PerformanceEntry { 
     *     name: 'meow', 
     *     entryType: 'mark', 
     *     startTime: 98.545991, 
     *     duration: 0, 
     *     detail: null 
     *   } 
     * ] 
     */
    console.log(perfObserverList.getEntriesByName('nope')); // []
    console.log(perfObserverList.getEntriesByName('test', 'mark'));
    /** 
     * [ 
     *   PerformanceEntry { 
     *     name: 'test', 
     *     entryType: 'mark', 
     *     startTime: 63.518931, 
     *     duration: 0, 
     *     detail: null 
     *   } 
     * ] 
     */
    console.log(perfObserverList.getEntriesByName('test', 'measure')); // []
    performance.clearMarks();
    performance.clearMeasures();
    observer.disconnect();
});

obs.observe({ entryTypes: ['mark', 'measure'] });
performance.mark('test');
performance.mark('meow');
```


#### `performanceObserverEntryList.getEntriesByType(type)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#performanceobserverentrylistgetentriesbytypetype)

추가된 버전: v8.5.0

-   `type` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   반환값: [`<PerformanceEntry\[\]>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-performanceentry)

`performanceEntry.entryType`이 `type`과 일치하는 `PerformanceEntry` 객체들을 `performanceEntry.startTime` 기준으로 시간순으로 정렬한 목록을 반환합니다.

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

const obs = new PerformanceObserver((perfObserverList, observer) => {
    console.log(perfObserverList.getEntriesByType('mark'));
    /**
     * [
     *   PerformanceEntry {
     *     name: 'test',
     *     entryType: 'mark',
     *     startTime: 55.897834,
     *     duration: 0,
     *     detail: null
     *   },
     *   PerformanceEntry {
     *     name: 'meow',
     *     entryType: 'mark',
     *     startTime: 56.350146,
     *     duration: 0,
     *     detail: null
     *   }
     * ]
     */
    performance.clearMarks();
    performance.clearMeasures();
    observer.disconnect();
});

obs.observe({ type: 'mark' });
performance.mark('test');
performance.mark('meow');
```


### `perf_hooks.createHistogram([options])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#perf_hookscreatehistogramoptions)

추가된 버전: v15.9.0, v14.18.0

-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `lowest` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt) 측정 가능한 최소값. 0보다 큰 정수여야 합니다. **기본값:** `1`.
    -   `highest` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt) 기록 가능한 최대값. `lowest` 값의 두 배 이상이어야 합니다. **기본값:** `Number.MAX_SAFE_INTEGER`.
    -   `figures` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 정확도 자릿수. `1`에서 `5` 사이의 숫자여야 합니다. **기본값:** `3`.
-   반환값: [`<RecordableHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-recordablehistogram-extends-histogram)

[`<RecordableHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-recordablehistogram-extends-histogram)을 반환합니다.


### `perf_hooks.monitorEventLoopDelay([options])`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#perf_hooksmonitoreventloopdelayoptions)

추가된 버전: v11.10.0

-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `resolution` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 샘플링 간격을 밀리초 단위로 지정합니다. 0보다 커야 합니다. **기본값:** `10`.
-   반환값: [`<IntervalHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-intervalhistogram-extends-histogram)

*이 기능은 Node.js의 확장 기능입니다. 웹 브라우저에서는 사용할 수 없습니다.*

이 함수는 시간에 따른 이벤트 루프 지연을 샘플링하고 보고하는 `IntervalHistogram` 객체를 생성합니다. 지연 시간은 나노초 단위로 보고됩니다.

타이머를 사용하여 이벤트 루프 지연을 감지하는 방법은 타이머의 실행이 libuv 이벤트 루프의 생명주기와 직접적으로 연결되어 있기 때문에 가능합니다. 즉, 루프에서 지연이 발생하면 타이머의 실행도 지연되며, 이 API는 이러한 지연을 감지하기 위해 설계되었습니다.

```js
import { monitorEventLoopDelay } from 'node:perf_hooks';

const h = monitorEventLoopDelay({ resolution: 20 });
h.enable();

// 작업 수행

h.disable();

console.log(h.min);
console.log(h.max);
console.log(h.mean);
console.log(h.stddev);
console.log(h.percentiles);
console.log(h.percentile(50));
console.log(h.percentile(99));
```


### 클래스: `Histogram`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-histogram)

추가된 버전: v11.10.0


#### `histogram.count`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramcount)

추가된 버전: v17.4.0, v16.14.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

히스토그램에 기록된 샘플의 수를 나타냅니다.


#### `histogram.countBigInt`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramcountbigint)

추가된 버전: v17.4.0, v16.14.0

- [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)

히스토그램에 기록된 샘플의 수를 나타냅니다.


#### `histogram.exceeds`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramexceeds)

추가된 버전: v11.10.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이벤트 루프 지연이 최대 1시간 이벤트 루프 지연 임계값을 초과한 횟수를 나타냅니다.


#### `histogram.exceedsBigInt`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramexceedsbigint)

추가된 버전: v17.4.0, v16.14.0

-   [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)

이벤트 루프 지연이 최대 1시간 이벤트 루프 지연 임계값을 초과한 횟수를 나타냅니다.


#### `histogram.max`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrammax)

추가된 버전: v11.10.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

기록된 이벤트 루프 지연 시간의 최대값입니다.


#### `histogram.maxBigInt`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrammaxbigint)

추가된 버전: v17.4.0, v16.14.0

- [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)

이벤트 루프 지연 시간의 최대 기록값입니다.


#### `histogram.mean`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrammean)

추가된 버전: v11.10.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

기록된 이벤트 루프 지연 시간의 평균값을 나타냅니다.


#### `histogram.min`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrammin)

추가된 버전: v11.10.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

기록된 이벤트 루프 지연 시간의 최솟값입니다.


#### `histogram.minBigInt`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramminbigint)

추가된 버전: v17.4.0, v16.14.0

- [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)

기록된 이벤트 루프 지연 시간의 최솟값입니다.


#### `histogram.percentile(percentile)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrampercentilepercentile)

추가된 버전: v11.10.0

-   `percentile` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 0에서 100 사이의 백분위 값.
-   반환값: [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

주어진 백분위에 해당하는 값을 반환합니다.


#### `histogram.percentileBigInt(percentile)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrampercentilebigintpercentile)

추가된 버전: v17.4.0, v16.14.0

-   `percentile` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 0에서 100 사이의 백분위 값.
-   반환값: [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)

주어진 백분위에 해당하는 값을 반환합니다.


#### `histogram.percentiles`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrampercentiles)

추가된 버전: v11.10.0

-   [`<Map>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)

누적된 백분위수 분포를 상세히 설명하는 `Map` 객체를 반환합니다.


#### `histogram.percentilesBigInt`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogrampercentilesbigint)

추가된 버전: v17.4.0, v16.14.0

- [`<Map>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)

누적된 백분위수 분포를 상세히 설명하는 `Map` 객체를 반환합니다.


#### `histogram.reset()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramreset)

추가된 버전: v11.10.0

수집된 히스토그램 데이터를 초기화합니다.


#### `histogram.stddev`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramstddev)

추가된 버전: v11.10.0

-   [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

기록된 이벤트 루프 지연 시간의 표준 편차를 나타냅니다.


### 클래스: `IntervalHistogram extends Histogram`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-intervalhistogram-extends-histogram)

주어진 간격으로 주기적으로 업데이트되는 `Histogram`입니다.


#### `histogram.disable()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramdisable)

추가된 버전: v11.10.0

-   반환값: [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type)

업데이트 간격 타이머를 비활성화합니다. 타이머가 정지되면 `true`를 반환하고, 이미 정지된 상태라면 `false`를 반환합니다.


#### `histogram.enable()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramenable)

추가된 버전: v11.10.0

-   반환값: [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type)

업데이트 간격 타이머를 활성화합니다. 타이머가 시작되면 `true`를 반환하고, 이미 시작된 상태라면 `false`를 반환합니다.


#### `IntervalHistogram` 복제하기

[`<IntervalHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-intervalhistogram-extends-histogram) 인스턴스는 [`<MessagePort>`](https://nodejs.org/docs/latest/api/worker_threads.html#class-messageport)를 통해 복제할 수 있습니다. 복제된 히스토그램은 수신 측에서 일반 [`<Histogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-histogram) 객체로 복제되며, 이 객체는 `enable()` 및 `disable()` 메서드를 구현하지 않습니다.


### 클래스: `RecordableHistogram` (Histogram 상속)[#](https://nodejs.org/docs/latest/api/perf_hooks.html#class-recordablehistogram-extends-histogram)

추가된 버전: v15.9.0, v14.18.0


#### `histogram.add(other)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramaddother)

추가된 버전: v17.4.0, v16.14.0

-   `other` [`<RecordableHistogram>`](https://nodejs.org/docs/latest/api/perf_hooks.html#class-recordablehistogram-extends-histogram)

`other`의 값을 현재 히스토그램에 추가합니다.


#### `histogram.record(val)`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramrecordval)

추가된 버전: v15.9.0, v14.18.0

- `val` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<bigint>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt) 히스토그램에 기록할 값입니다.


#### `histogram.recordDelta()`[#](https://nodejs.org/docs/latest/api/perf_hooks.html#histogramrecorddelta)

추가된 버전: v15.9.0, v14.18.0

이 메서드는 이전 `recordDelta()` 호출 이후 경과된 시간(나노초 단위)을 계산하고, 그 값을 히스토그램에 기록합니다.


### Examples[#](https://nodejs.org/docs/latest/api/perf_hooks.html#examples)





#### 비동기 작업의 지속 시간 측정하기

다음 예제는 [Async Hooks](https://nodejs.org/docs/latest/api/async_hooks.html)와 Performance API를 사용하여 Timeout 작업의 실제 지속 시간을 측정합니다. 이때 콜백 실행에 걸린 시간도 포함됩니다.

```js
import { createHook } from 'node:async_hooks';
import { performance, PerformanceObserver } from 'node:perf_hooks';

const set = new Set();

const hook = createHook({
  init(id, type) {
    if (type === 'Timeout') {
      performance.mark(`Timeout-${id}-Init`);
      set.add(id);
    }
  },
  destroy(id) {
    if (set.has(id)) {
      set.delete(id);
      performance.mark(`Timeout-${id}-Destroy`);
      performance.measure(`Timeout-${id}`, `Timeout-${id}-Init`, `Timeout-${id}-Destroy`);
    }
  },
});

hook.enable();

const obs = new PerformanceObserver((list, observer) => {
  console.log(list.getEntries()[0]);
  performance.clearMarks();
  performance.clearMeasures();
  observer.disconnect();
});

obs.observe({ entryTypes: ['measure'], buffered: true });

setTimeout(() => {}, 1000);
```

이 코드는 `Timeout` 작업의 시작과 종료 시점을 기록하고, 그 사이의 시간을 측정합니다. 측정 결과는 `PerformanceObserver`를 통해 콘솔에 출력됩니다.


#### 의존성 로딩 시간 측정하기

다음 예제는 `require()` 작업을 통해 의존성을 로드하는 데 걸리는 시간을 측정합니다:

```js
import { performance, PerformanceObserver } from 'node:perf_hooks';

// 옵저버 활성화
const obs = new PerformanceObserver((list) => {
  const entries = list.getEntries();
  entries.forEach((entry) => {
    console.log(`import('${entry[0]}')`, entry.duration);
  });
  performance.clearMarks();
  performance.clearMeasures();
  obs.disconnect();
});

obs.observe({ entryTypes: ['function'], buffered: true });

const timedImport = performance.timerify(async (module) => {
  return await import(module);
});

await timedImport('some-module');
```


#### HTTP 왕복 시간 측정하기

다음 예제는 HTTP 클라이언트(`OutgoingMessage`)와 HTTP 요청(`IncomingMessage`)에 소요된 시간을 추적하는 데 사용됩니다. HTTP 클라이언트의 경우, 요청을 시작하고 응답을 받는 사이의 시간 간격을 의미합니다. HTTP 요청의 경우, 요청을 받고 응답을 보내는 사이의 시간 간격을 의미합니다:

```js
import { PerformanceObserver } from 'node:perf_hooks';
import { createServer, get } from 'node:http';

const obs = new PerformanceObserver((items) => {
  items.getEntries().forEach((item) => {
    console.log(item);
  });
});

obs.observe({ entryTypes: ['http'] });

const PORT = 8080;

createServer((req, res) => {
  res.end('ok');
}).listen(PORT, () => {
  get(`http://127.0.0.1:${PORT}`);
});
```


#### TCP 연결 성공 시 `net.connect` 소요 시간 측정하기

```js
import { PerformanceObserver } from 'node:perf_hooks';
import { connect, createServer } from 'node:net';

const obs = new PerformanceObserver((items) => {
    items.getEntries().forEach((item) => {
        console.log(item);
    });
});

obs.observe({ entryTypes: ['net'] });

const PORT = 8080;

createServer((socket) => {
    socket.destroy();
}).listen(PORT, () => {
    connect(PORT);
});
```

이 예제는 TCP 연결이 성공적으로 이루어질 때 `net.connect` 함수의 소요 시간을 측정하는 방법을 보여줍니다. `PerformanceObserver`를 사용하여 네트워크 이벤트를 모니터링하고, `createServer`로 서버를 생성한 후 `connect` 함수를 호출하여 연결을 시도합니다. 연결이 성공하면 소요 시간이 콘솔에 출력됩니다.


#### DNS 요청이 성공할 때 걸리는 시간 측정하기

```javascript
import { PerformanceObserver } from 'node:perf_hooks';
import { lookup, promises } from 'node:dns';

const obs = new PerformanceObserver((items) => {
  items.getEntries().forEach((item) => {
    console.log(item);
  });
});

obs.observe({ entryTypes: ['dns'] });

lookup('localhost', () => {});
promises.resolve('localhost');
```

이 코드는 Node.js에서 DNS 요청이 성공적으로 완료될 때까지 걸리는 시간을 측정하는 방법을 보여줍니다. `PerformanceObserver`를 사용하여 DNS 관련 이벤트를 관찰하고, `lookup`과 `promises.resolve`를 통해 DNS 요청을 수행합니다. 요청이 완료되면, 각 이벤트의 세부 정보를 콘솔에 출력합니다.


