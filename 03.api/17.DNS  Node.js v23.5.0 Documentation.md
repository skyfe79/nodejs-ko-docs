# DNS

**소스 코드:** [lib/dns.js](https://github.com/nodejs/node/blob/v23.5.0/lib/dns.js)

`node:dns` 모듈은 이름 해석을 가능하게 합니다. 예를 들어, 호스트 이름의 IP 주소를 조회하는 데 사용할 수 있습니다.

[도메인 네임 시스템(DNS)](https://en.wikipedia.org/wiki/Domain_Name_System)이라는 이름이 붙었지만, 항상 DNS 프로토콜을 사용하여 조회를 수행하는 것은 아닙니다. [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)은 운영 체제의 기능을 사용하여 이름 해석을 수행합니다. 이 경우 네트워크 통신이 필요하지 않을 수도 있습니다. 동일한 시스템의 다른 애플리케이션과 동일한 방식으로 이름 해석을 수행하려면 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)을 사용하세요.

```js
import dns from 'node:dns';
dns.lookup('example.org', (err, address, family) => {
    console.log('address: %j family: IPv%s', address, family);
});
// address: "2606:2800:21f:cb07:6820:80da:af6b:8b2c" family: IPv6
```

`node:dns` 모듈의 다른 모든 함수는 실제 DNS 서버에 연결하여 이름 해석을 수행합니다. 이 함수들은 항상 네트워크를 사용하여 DNS 쿼리를 수행합니다. 이러한 함수들은 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)이 사용하는 설정 파일(예: `/etc/hosts`)과 동일한 파일을 사용하지 않습니다. 다른 이름 해석 기능을 우회하여 항상 DNS 쿼리를 수행하려면 이러한 함수를 사용하세요.

```js
import dns from 'node:dns';
dns.resolve4('archive.org', (err, addresses) => {
    if (err) throw err;
    console.log(`addresses: ${JSON.stringify(addresses)}`);
    addresses.forEach((a) => {
        dns.reverse(a, (err, hostnames) => {
            if (err) {
                throw err;
            }
            console.log(`reverse for ${a}: ${JSON.stringify(hostnames)}`);
        });
    });
});
```

더 많은 정보는 [구현 고려 사항 섹션](https://nodejs.org/docs/latest/api/dns.html#implementation-considerations)을 참고하세요.


### 클래스: `dns.Resolver`[#](https://nodejs.org/docs/latest/api/dns.html#class-dnsresolver)

추가된 버전: v8.3.0

`dns.Resolver`는 DNS 요청을 처리하는 독립적인 리졸버입니다.

새로운 리졸버를 생성하면 기본 서버 설정을 사용합니다. [`resolver.setServers()`](https://nodejs.org/docs/latest/api/dns.html#dnssetserversservers)를 사용하여 리졸버에 사용할 서버를 설정해도 다른 리졸버에는 영향을 미치지 않습니다:

```js
import { Resolver } from 'node:dns';
const resolver = new Resolver();
resolver.setServers(['4.4.4.4']); // 이 요청은 전역 설정과 무관하게 4.4.4.4 서버를 사용합니다.
resolver.resolve4('example.org', (err, addresses) => {
  // ...
});
```

`node:dns` 모듈에서 사용할 수 있는 메서드는 다음과 같습니다:

-   [`resolver.getServers()`](https://nodejs.org/docs/latest/api/dns.html#dnsgetservers)
-   [`resolver.resolve()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvehostname-rrtype-callback)
-   [`resolver.resolve4()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolve4hostname-options-callback)
-   [`resolver.resolve6()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolve6hostname-options-callback)
-   [`resolver.resolveAny()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolveanyhostname-callback)
-   [`resolver.resolveCaa()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecaahostname-callback)
-   [`resolver.resolveCname()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecnamehostname-callback)
-   [`resolver.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvemxhostname-callback)
-   [`resolver.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenaptrhostname-callback)
-   [`resolver.resolveNs()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenshostname-callback)
-   [`resolver.resolvePtr()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolveptrhostname-callback)
-   [`resolver.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesoahostname-callback)
-   [`resolver.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesrvhostname-callback)
-   [`resolver.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvetxthostname-callback)
-   [`resolver.reverse()`](https://nodejs.org/docs/latest/api/dns.html#dnsreverseip-callback)
-   [`resolver.setServers()`](https://nodejs.org/docs/latest/api/dns.html#dnssetserversservers)


#### `Resolver([options])`[#](https://nodejs.org/docs/latest/api/dns.html#resolveroptions)

새로운 리졸버를 생성합니다.

-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `timeout` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 쿼리 타임아웃을 밀리초 단위로 설정합니다. `-1`로 설정하면 기본 타임아웃을 사용합니다.
    -   `tries` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 리졸버가 각 네임 서버에 접속을 시도하는 횟수입니다. **기본값:** `4`


#### `resolver.cancel()`[#](https://nodejs.org/docs/latest/api/dns.html#resolvercancel)

**추가된 버전:** v8.3.0

이 리졸버(resolver)가 수행한 모든 대기 중인 DNS 쿼리를 취소합니다. 해당 콜백은 `ECANCELLED` 코드와 함께 에러를 받아 호출됩니다.


#### `resolver.setLocalAddress([ipv4][, ipv6])`[#](https://nodejs.org/docs/latest/api/dns.html#resolversetlocaladdressipv4-ipv6)

추가된 버전: v15.1.0, v14.17.0

-   `ipv4` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) IPv4 주소를 나타내는 문자열. **기본값:** `'0.0.0.0'`
-   `ipv6` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) IPv6 주소를 나타내는 문자열. **기본값:** `'::0'`

이 메서드는 리졸버 인스턴스가 요청을 보낼 때 사용할 IP 주소를 지정합니다. 이를 통해 다중 홈 시스템에서 사용할 때 아웃바운드 인터페이스를 지정할 수 있습니다.

IPv4 또는 IPv6 주소가 지정되지 않으면 기본값으로 설정되며, 운영체제가 자동으로 로컬 주소를 선택합니다.

리졸버는 IPv4 DNS 서버에 요청을 보낼 때 IPv4 로컬 주소를 사용하고, IPv6 DNS 서버에 요청을 보낼 때 IPv6 로컬 주소를 사용합니다. 요청의 `rrtype`은 사용되는 로컬 주소에 영향을 미치지 않습니다.


### `dns.getServers()`[#](https://nodejs.org/docs/latest/api/dns.html#dnsgetservers)

추가된 버전: v0.11.3

-   반환값: [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

현재 DNS 해석을 위해 설정된 IP 주소 문자열 배열을 반환합니다. 이 배열은 [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6)에 따라 포맷되어 있습니다. 커스텀 포트가 사용된 경우 문자열에 포트 부분이 포함됩니다.

```js
[ '8.8.8.8', '2001:4860:4860::8888', '8.8.8.8:1053', '[2001:4860:4860::8888]:1053', ]
```


### `dns.lookup(hostname[, options], callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `options` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `family` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 레코드 패밀리. `4`, `6`, 또는 `0`이어야 합니다. 이전 버전과의 호환성을 위해 `'IPv4'`와 `'IPv6'`은 각각 `4`와 `6`으로 해석됩니다. 값 `0`은 IPv4 또는 IPv6 주소가 반환됨을 의미합니다. `{ all: true }`와 함께 `0`을 사용하면 시스템의 DNS 리졸버에 따라 IPv4와 IPv6 주소 중 하나 또는 둘 다 반환됩니다. **기본값:** `0`.
    -   `hints` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 하나 이상의 [지원되는 `getaddrinfo` 플래그](https://nodejs.org/docs/latest/api/dns.html#supported-getaddrinfo-flags). 여러 플래그는 비트 OR 연산으로 전달할 수 있습니다.
    -   `all` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) `true`일 때, 콜백은 모든 해결된 주소를 배열로 반환합니다. 그렇지 않으면 단일 주소를 반환합니다. **기본값:** `false`.
    -   `order` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) `verbatim`일 때, 해결된 주소는 정렬되지 않은 상태로 반환됩니다. `ipv4first`일 때, IPv4 주소가 IPv6 주소보다 먼저 정렬됩니다. `ipv6first`일 때, IPv6 주소가 IPv4 주소보다 먼저 정렬됩니다. **기본값:** `verbatim` (주소가 재정렬되지 않음). 기본값은 [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder) 또는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)를 사용하여 설정할 수 있습니다.
    -   `verbatim` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) `true`일 때, 콜백은 DNS 리졸버가 반환한 순서대로 IPv4와 IPv6 주소를 받습니다. `false`일 때, IPv4 주소가 IPv6 주소보다 먼저 배치됩니다. 이 옵션은 `order`를 대체할 예정입니다. 둘 다 지정된 경우 `order`가 우선합니다. 새로운 코드에서는 `order`만 사용해야 합니다. **기본값:** `true` (주소가 재정렬되지 않음). 기본값은 [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder) 또는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)를 사용하여 설정할 수 있습니다.
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `address` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) IPv4 또는 IPv6 주소의 문자열 표현.
    -   `family` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) `4` 또는 `6`, `address`의 패밀리를 나타내며, 주소가 IPv4 또는 IPv6가 아닌 경우 `0`입니다. `0`은 운영 체제의 이름 해결 서비스에 버그가 있을 가능성이 높음을 나타냅니다.

호스트 이름(예: `'nodejs.org'`)을 첫 번째로 찾은 A (IPv4) 또는 AAAA (IPv6) 레코드로 해결합니다. 모든 `option` 속성은 선택 사항입니다. `options`가 정수라면 `4` 또는 `6`이어야 합니다. `options`가 제공되지 않으면 IPv4 또는 IPv6 주소, 또는 둘 다가 반환될 수 있습니다.

`all` 옵션이 `true`로 설정된 경우, `callback`의 인수는 `(err, addresses)`로 변경되며, `addresses`는 `address`와 `family` 속성을 가진 객체의 배열입니다.

오류가 발생하면 `err`은 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체이며, `err.code`는 오류 코드입니다. `err.code`는 호스트 이름이 존재하지 않을 때뿐만 아니라 파일 디스크립터가 부족한 경우와 같은 다른 이유로 조회가 실패할 때도 `'ENOTFOUND'`로 설정될 수 있습니다.

`dns.lookup()`은 반드시 DNS 프로토콜과 관련이 있는 것은 아닙니다. 이 구현은 운영 체제의 기능을 사용하여 이름과 주소를 연결하고 그 반대도 가능합니다. 이 구현은 Node.js 프로그램의 동작에 미묘하지만 중요한 영향을 미칠 수 있습니다. `dns.lookup()`을 사용하기 전에 [구현 고려 사항 섹션](https://nodejs.org/docs/latest/api/dns.html#implementation-considerations)을 참고하는 시간을 가지세요.

예제 사용법:

```js
import dns from 'node:dns';

const options = {
    family: 6,
    hints: dns.ADDRCONFIG | dns.V4MAPPED,
};

dns.lookup('example.org', options, (err, address, family) => {
    console.log('address: %j family: IPv%s', address, family);
    // address: "2606:2800:21f:cb07:6820:80da:af6b:8b2c" family: IPv6
});

// options.all이 true일 때, 결과는 배열이 됩니다.
options.all = true;
dns.lookup('example.org', options, (err, addresses) => {
    console.log('addresses: %j', addresses);
    // addresses: [{"address":"2606:2800:21f:cb07:6820:80da:af6b:8b2c","family":6}]
});
```

이 메서드가 [`util.promisify()`](https://nodejs.org/docs/latest/api/util.html#utilpromisifyoriginal)된 버전으로 호출되고 `all`이 `true`로 설정되지 않은 경우, `address`와 `family` 속성을 가진 객체에 대한 `Promise`를 반환합니다.


#### 지원되는 getaddrinfo 플래그

다음 플래그들은 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)에 힌트로 전달할 수 있습니다.

-   `dns.ADDRCONFIG`: 시스템에 구성된 비루프백 주소 타입으로 반환되는 주소 타입을 제한합니다. 예를 들어, 현재 시스템에 최소 하나의 IPv4 주소가 구성된 경우에만 IPv4 주소가 반환됩니다.
-   `dns.V4MAPPED`: IPv6 패밀리가 지정되었지만 IPv6 주소를 찾지 못한 경우, IPv4 매핑된 IPv6 주소를 반환합니다. 이 플래그는 일부 운영체제(예: FreeBSD 10.1)에서 지원되지 않습니다.
-   `dns.ALL`: `dns.V4MAPPED`가 지정된 경우, 해결된 IPv6 주소와 함께 IPv4 매핑된 IPv6 주소도 반환합니다.


### `dns.lookupService(address, port, callback)`

- `address` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
- `port` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)
- `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
  - `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
  - `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 예: `example.com`
  - `service` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 예: `http`

이 메서드는 운영체제의 `getnameinfo` 구현을 사용하여 주어진 `address`와 `port`를 호스트 이름과 서비스로 변환합니다.

`address`가 유효한 IP 주소가 아닌 경우 `TypeError`가 발생합니다. `port`는 숫자로 강제 변환됩니다. 유효한 포트가 아닌 경우에도 `TypeError`가 발생합니다.

에러가 발생하면 `err`은 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체가 되며, `err.code`는 에러 코드를 나타냅니다.

```javascript
import dns from 'node:dns';

dns.lookupService('127.0.0.1', 22, (err, hostname, service) => {
  console.log(hostname, service); // 출력: localhost ssh
});
```

이 메서드를 [`util.promisify()`](https://nodejs.org/docs/latest/api/util.html#utilpromisifyoriginal) 버전으로 호출하면, `hostname`과 `service` 속성을 가진 객체를 반환하는 `Promise`가 반환됩니다.


### `dns.resolve(hostname[, rrtype], callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvehostname-rrtype-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)  
    해결할 호스트 이름입니다.
-   `rrtype` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)  
    리소스 레코드 타입입니다. **기본값:** `'A'`.
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)  
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)  
    -   `records` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 호스트 이름(예: `'nodejs.org'`)을 리소스 레코드 배열로 변환합니다. `callback` 함수는 `(err, records)` 인자를 받습니다. 성공 시 `records`는 리소스 레코드 배열이 됩니다. 각 결과의 타입과 구조는 `rrtype`에 따라 다릅니다:

| `rrtype` | `records` 내용 | 결과 타입 | 단축 메서드 |
| --- | --- | --- | --- |
| `'A'` | IPv4 주소 (기본값) | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolve4()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolve4hostname-options-callback) |
| `'AAAA'` | IPv6 주소 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolve6()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolve6hostname-options-callback) |
| `'ANY'` | 모든 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveAny()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolveanyhostname-callback) |
| `'CAA'` | CA 인증 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveCaa()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecaahostname-callback) |
| `'CNAME'` | 정식 이름 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolveCname()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecnamehostname-callback) |
| `'MX'` | 메일 교환 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvemxhostname-callback) |
| `'NAPTR'` | 이름 권한 포인터 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenaptrhostname-callback) |
| `'NS'` | 네임 서버 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolveNs()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenshostname-callback) |
| `'PTR'` | 포인터 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolvePtr()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolveptrhostname-callback) |
| `'SOA'` | 권한 시작 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesoahostname-callback) |
| `'SRV'` | 서비스 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dns.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesrvhostname-callback) |
| `'TXT'` | 텍스트 레코드 | [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dns.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvetxthostname-callback) |

오류 발생 시 `err`는 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체이며, `err.code`는 [DNS 오류 코드](https://nodejs.org/docs/latest/api/dns.html#error-codes) 중 하나입니다.


### `dns.resolve4(hostname[, options], callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolve4hostname-options-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)  
    해결할 호스트 이름입니다.

-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)  
    -   `ttl` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type)  
        각 레코드의 Time-To-Live 값(TTL)을 가져옵니다. `true`로 설정하면, 콜백 함수는 문자열 배열 대신 `{ address: '1.2.3.4', ttl: 60 }` 형태의 객체 배열을 받습니다. TTL은 초 단위로 표현됩니다.

-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)  
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)  
    -   `addresses` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`에 대한 IPv4 주소(`A` 레코드)를 해결합니다. `callback` 함수에 전달되는 `addresses` 인자는 IPv4 주소 배열을 포함합니다. 예를 들어, `['74.125.79.104', '74.125.79.105', '74.125.79.106']`와 같은 형태입니다.


### `dns.resolve6(hostname[, options], callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolve6hostname-options-callback)

- `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)  
  해결할 호스트 이름입니다.

- `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)  
  - `ttl` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type)  
    각 레코드의 TTL(Time-To-Live) 값을 가져올지 여부를 지정합니다. `true`로 설정하면, 콜백 함수는 문자열 배열 대신 `{ address: '0:1:2:3:4:5:6:7', ttl: 60 }` 형태의 객체 배열을 받습니다. TTL은 초 단위로 표현됩니다.

- `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)  
  - `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)  
  - `addresses` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)  

DNS 프로토콜을 사용하여 `hostname`에 대한 IPv6 주소(`AAAA` 레코드)를 해결합니다. `callback` 함수에 전달되는 `addresses` 인자는 IPv6 주소 배열을 포함합니다.


### `dns.resolveAny(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolveanyhostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `ret` [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 모든 레코드(또는 `ANY` 또는 `*` 쿼리)를 해결합니다. `callback` 함수에 전달되는 `ret` 인자는 다양한 타입의 레코드를 포함하는 배열입니다. 각 객체는 현재 레코드의 타입을 나타내는 `type` 속성을 가지고 있습니다. 그리고 `type`에 따라 객체에 추가 속성이 존재할 수 있습니다:

| 타입 | 속성 |
| --- | --- |
| `'A'` | `address`/`ttl` |
| `'AAAA'` | `address`/`ttl` |
| `'CNAME'` | `value` |
| `'MX'` | [`dns.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvemxhostname-callback) 참조 |
| `'NAPTR'` | [`dns.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenaptrhostname-callback) 참조 |
| `'NS'` | `value` |
| `'PTR'` | `value` |
| `'SOA'` | [`dns.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesoahostname-callback) 참조 |
| `'SRV'` | [`dns.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesrvhostname-callback) 참조 |
| `'TXT'` | 이 타입의 레코드는 `entries`라는 배열 속성을 포함하며, 이는 [`dns.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvetxthostname-callback)를 참조합니다. 예: `{ entries: ['...'], type: 'TXT' }` |

다음은 `callback`에 전달되는 `ret` 객체의 예시입니다:

```js
[
    { type: 'A', address: '127.0.0.1', ttl: 299 },
    { type: 'CNAME', value: 'example.com' },
    { type: 'MX', exchange: 'alt4.aspmx.l.example.com', priority: 50 },
    { type: 'NS', value: 'ns1.example.com' },
    { type: 'TXT', entries: [ 'v=spf1 include:_spf.example.com ~all' ] },
    { type: 'SOA', nsname: 'ns1.example.com', hostmaster: 'admin.example.com', serial: 156696742, refresh: 900, retry: 900, expire: 1800, minttl: 60 }
]
```

DNS 서버 운영자는 `ANY` 쿼리에 응답하지 않을 수 있습니다. 따라서 [`dns.resolve4()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolve4hostname-options-callback), [`dns.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvemxhostname-callback)와 같은 개별 메서드를 호출하는 것이 더 나을 수 있습니다. 자세한 내용은 [RFC 8482](https://tools.ietf.org/html/rfc8482)를 참조하세요.


### `dns.resolveCname(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecnamehostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `addresses` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 `CNAME` 레코드를 조회합니다. `callback` 함수에 전달되는 `addresses` 인자는 `hostname`에 대한 정식 이름(canonical name) 레코드 배열을 포함합니다 (예: `['bar.example.com']`).


### `dns.resolveCaa(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvecaahostname-callback)

- `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
- `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
  - `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
  - `records` [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`에 대한 `CAA` 레코드를 조회합니다. `callback` 함수에 전달되는 `records` 인자는 해당 `hostname`에 대한 인증 기관 승인 레코드 배열을 포함합니다. 예를 들어, `[{critical: 0, iodef: 'mailto:pki@example.com'}, {critical: 128, issue: 'pki.example.com'}]`와 같은 형태입니다.


### `dns.resolveMx(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvemxhostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `addresses` [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`에 대한 메일 교환 레코드(`MX` 레코드)를 조회합니다. `callback` 함수에 전달되는 `addresses` 인자는 `priority`와 `exchange` 속성을 포함하는 객체 배열을 담고 있습니다. 예를 들어, `[{priority: 10, exchange: 'mx.example.com'}, ...]`와 같은 형태입니다.


### `dns.resolveNaptr(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenaptrhostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `addresses` [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`에 대한 정규 표현식 기반 레코드(`NAPTR` 레코드)를 해결합니다. `callback` 함수에 전달되는 `addresses` 인자는 다음과 같은 속성을 가진 객체 배열을 포함합니다:

-   `flags`
-   `service`
-   `regexp`
-   `replacement`
-   `order`
-   `preference`

```js
{
    flags: 's',
    service: 'SIP+D2U',
    regexp: '',
    replacement: '_sip._udp.example.com',
    order: 30,
    preference: 100
}
```


### `dns.resolveNs(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvenshostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `addresses` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 네임 서버 레코드(`NS` 레코드)를 조회합니다. `callback` 함수에 전달되는 `addresses` 인자는 `hostname`에 사용 가능한 네임 서버 레코드 배열을 포함합니다 (예: `['ns1.example.com', 'ns2.example.com']`).


### `dns.resolvePtr(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolveptrhostname-callback)

- `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
- `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
  - `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
  - `addresses` [`<string[]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 포인터 레코드(`PTR` 레코드)를 조회합니다. `callback` 함수에 전달되는 `addresses` 인자는 응답 레코드를 포함하는 문자열 배열입니다.


### `dns.resolveSoa(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesoahostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `address` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`의 SOA(Start of Authority) 레코드를 조회합니다. `callback` 함수에 전달되는 `address` 인자는 다음과 같은 속성을 가진 객체입니다:

-   `nsname`
-   `hostmaster`
-   `serial`
-   `refresh`
-   `retry`
-   `expire`
-   `minttl`

```js
{
    nsname: 'ns.example.com',
    hostmaster: 'root.example.com',
    serial: 2013101809,
    refresh: 10000,
    retry: 2400,
    expire: 604800,
    minttl: 3600
}
```


### `dns.resolveSrv(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvesrvhostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `addresses` [`<Object\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

DNS 프로토콜을 사용하여 `hostname`의 서비스 레코드(`SRV` 레코드)를 조회합니다. `callback` 함수에 전달되는 `addresses` 인자는 다음과 같은 속성을 가진 객체 배열입니다:

-   `priority`
-   `weight`
-   `port`
-   `name`

```js
{ priority: 10, weight: 5, port: 21223, name: 'service.example.com' }
```


### `dns.resolveTxt(hostname, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolvetxthostname-callback)

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `records` [`<string\[\]\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 텍스트 쿼리(`TXT` 레코드)를 해결합니다. `callback` 함수에 전달되는 `records` 인자는 `hostname`에 사용 가능한 텍스트 레코드의 2차원 배열입니다 (예: `[ ['v=spf1 ip4:0.0.0.0 ', '~all' ] ]`). 각 하위 배열은 하나의 레코드의 TXT 청크를 포함합니다. 사용 사례에 따라 이들을 함께 결합하거나 별도로 처리할 수 있습니다.


### `dns.reverse(ip, callback)`[#](https://nodejs.org/docs/latest/api/dns.html#dnsreverseip-callback)

추가된 버전: v0.1.16

-   `ip` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `callback` [`<Function>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)
    -   `err` [`<Error>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
    -   `hostnames` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

이 함수는 IPv4 또는 IPv6 주소를 호스트 이름 배열로 변환하는 역방향 DNS 쿼리를 수행합니다.

에러가 발생하면 `err`은 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체가 되며, `err.code`는 [DNS 에러 코드](https://nodejs.org/docs/latest/api/dns.html#error-codes) 중 하나입니다.


### `dns.setDefaultResultOrder(order)`

- `order` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)는 반드시 `'ipv4first'`, `'ipv6first'`, 또는 `'verbatim'` 중 하나여야 합니다.

이 메서드는 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)와 [`dnsPromises.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnspromiseslookuphostname-options)에서 사용되는 `order`의 기본값을 설정합니다. 설정할 수 있는 값은 다음과 같습니다:

- `ipv4first`: 기본 `order`를 `ipv4first`로 설정합니다.
- `ipv6first`: 기본 `order`를 `ipv6first`로 설정합니다.
- `verbatim`: 기본 `order`를 `verbatim`으로 설정합니다.

기본값은 `verbatim`이며, [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder)는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)보다 우선순위가 높습니다. [워커 스레드](https://nodejs.org/docs/latest/api/worker_threads.html)를 사용할 때, 메인 스레드에서 호출한 [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder)는 워커 스레드의 기본 DNS 순서에 영향을 미치지 않습니다.


### `dns.getDefaultResultOrder()`[#](https://nodejs.org/docs/latest/api/dns.html#dnsgetdefaultresultorder)

[`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)와 [`dnsPromises.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnspromiseslookuphostname-options)에서 사용되는 `order`의 기본값을 가져옵니다. 이 값은 다음과 같을 수 있습니다:

-   `ipv4first`: `order`의 기본값이 `ipv4first`로 설정됩니다.
-   `ipv6first`: `order`의 기본값이 `ipv6first`로 설정됩니다.
-   `verbatim`: `order`의 기본값이 `verbatim`으로 설정됩니다.


### `dns.setServers(servers)`[#](https://nodejs.org/docs/latest/api/dns.html#dnssetserversservers)

추가된 버전: v0.11.3

-   `servers` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6) 형식의 주소 배열

DNS 해석을 수행할 때 사용할 서버의 IP 주소와 포트를 설정합니다. `servers` 인자는 [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6) 형식의 주소 배열입니다. 포트가 IANA 기본 DNS 포트(53)인 경우 생략할 수 있습니다.

```js
dns.setServers([
    '8.8.8.8',
    '[2001:4860:4860::8888]',
    '8.8.8.8:1053',
    '[2001:4860:4860::8888]:1053',
]);
```

잘못된 주소가 제공되면 오류가 발생합니다.

DNS 쿼리가 진행 중일 때는 `dns.setServers()` 메서드를 호출하면 안 됩니다.

[`dns.setServers()`](https://nodejs.org/docs/latest/api/dns.html#dnssetserversservers) 메서드는 [`dns.resolve()`](https://nodejs.org/docs/latest/api/dns.html#dnsresolvehostname-rrtype-callback), `dns.resolve*()` 및 [`dns.reverse()`](https://nodejs.org/docs/latest/api/dns.html#dnsreverseip-callback)에만 영향을 미칩니다. (특히 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)에는 영향을 미치지 않습니다.)

이 메서드는 [resolve.conf](https://man7.org/linux/man-pages/man5/resolv.conf.5.html)와 매우 유사하게 동작합니다. 즉, 제공된 첫 번째 서버로 해석을 시도했을 때 `NOTFOUND` 오류가 발생하면, `resolve()` 메서드는 이후 제공된 서버로 해석을 시도하지 않습니다. 이전 서버들이 타임아웃되거나 다른 오류가 발생한 경우에만 대체 DNS 서버가 사용됩니다.


### DNS Promises API

`dns.promises` API는 콜백 대신 `Promise` 객체를 반환하는 비동기 DNS 메서드 세트를 제공합니다. 이 API는 `require('node:dns').promises` 또는 `require('node:dns/promises')`를 통해 접근할 수 있습니다.


#### 클래스: `dnsPromises.Resolver`[#](https://nodejs.org/docs/latest/api/dns.html#class-dnspromisesresolver)

추가된 버전: v10.6.0

`dnsPromises.Resolver`는 DNS 요청을 처리하는 독립적인 리졸버입니다.

새로운 리졸버를 생성하면 기본 서버 설정을 사용합니다. [`resolver.setServers()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisessetserversservers)를 통해 리졸버가 사용할 서버를 설정해도 다른 리졸버에는 영향을 미치지 않습니다:

```js
import { Resolver } from 'node:dns/promises';

const resolver = new Resolver();
resolver.setServers(['4.4.4.4']); // 이 요청은 글로벌 설정과 무관하게 4.4.4.4 서버를 사용합니다.
const addresses = await resolver.resolve4('example.org');
```

`dnsPromises` API에서 제공하는 메서드는 다음과 같습니다:

-   [`resolver.getServers()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesgetservers)
-   [`resolver.resolve()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvehostname-rrtype)
-   [`resolver.resolve4()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve4hostname-options)
-   [`resolver.resolve6()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve6hostname-options)
-   [`resolver.resolveAny()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveanyhostname)
-   [`resolver.resolveCaa()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecaahostname)
-   [`resolver.resolveCname()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecnamehostname)
-   [`resolver.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvemxhostname)
-   [`resolver.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenaptrhostname)
-   [`resolver.resolveNs()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenshostname)
-   [`resolver.resolvePtr()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveptrhostname)
-   [`resolver.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesoahostname)
-   [`resolver.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesrvhostname)
-   [`resolver.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvetxthostname)
-   [`resolver.reverse()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesreverseip)
-   [`resolver.setServers()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisessetserversservers)


#### `resolver.cancel()`[#](https://nodejs.org/docs/latest/api/dns.html#resolvercancel_1)

추가된 버전: v15.3.0, v14.17.0

이 리졸버(resolver)가 수행 중인 모든 DNS 쿼리를 취소합니다. 해당 Promise는 `ECANCELLED` 오류 코드와 함께 거부됩니다.


#### `dnsPromises.getServers()`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesgetservers)

v10.6.0에서 추가됨

-   반환값: [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

현재 DNS 해석을 위해 설정된 IP 주소 문자열 배열을 반환합니다. 이 배열은 [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6)에 따라 포맷됩니다. 커스텀 포트가 사용된 경우 문자열에 포트 부분이 포함됩니다.

```js
[ '8.8.8.8', '2001:4860:4860::8888', '8.8.8.8:1053', '[2001:4860:4860::8888]:1053', ]
```


#### `dnsPromises.lookup(hostname[, options])`

- `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
- `options` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    - `family` [`<integer>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 레코드 패밀리. `4`, `6`, 또는 `0`이어야 합니다. `0`은 IPv4 또는 IPv6 주소 중 하나가 반환됨을 의미합니다. `{ all: true }`와 함께 `0`을 사용하면, 시스템의 DNS 리졸버에 따라 IPv4와 IPv6 주소 중 하나 또는 둘 다 반환됩니다. **기본값:** `0`.
    - `hints` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type) 하나 이상의 [지원되는 `getaddrinfo` 플래그](https://nodejs.org/docs/latest/api/dns.html#supported-getaddrinfo-flags). 여러 플래그는 비트 단위 `OR` 연산으로 전달할 수 있습니다.
    - `all` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) `true`일 경우, `Promise`는 모든 주소를 배열로 반환합니다. 그렇지 않으면 단일 주소를 반환합니다. **기본값:** `false`.
    - `order` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) `verbatim`일 경우, `Promise`는 DNS 리졸버가 반환한 순서대로 IPv4와 IPv6 주소를 반환합니다. `ipv4first`일 경우, IPv4 주소가 IPv6 주소보다 먼저 반환됩니다. `ipv6first`일 경우, IPv6 주소가 IPv4 주소보다 먼저 반환됩니다. **기본값:** `verbatim` (주소가 재정렬되지 않음). 기본값은 [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder) 또는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)를 사용하여 설정할 수 있습니다. 새로운 코드는 `{ order: 'verbatim' }`을 사용해야 합니다.
    - `verbatim` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) `true`일 경우, `Promise`는 DNS 리졸버가 반환한 순서대로 IPv4와 IPv6 주소를 반환합니다. `false`일 경우, IPv4 주소가 IPv6 주소보다 먼저 반환됩니다. 이 옵션은 `order`로 대체될 예정입니다. 둘 다 지정된 경우, `order`가 우선합니다. 새로운 코드는 `order`만 사용해야 합니다. **기본값:** 현재 `false` (주소가 재정렬됨)이지만 가까운 미래에 변경될 예정입니다. 기본값은 [`dns.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnssetdefaultresultorderorder) 또는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)를 사용하여 설정할 수 있습니다.

호스트 이름(예: `'nodejs.org'`)을 첫 번째로 찾은 A (IPv4) 또는 AAAA (IPv6) 레코드로 변환합니다. 모든 `option` 속성은 선택 사항입니다. `options`가 정수라면 `4` 또는 `6`이어야 합니다. `options`가 제공되지 않으면 IPv4 또는 IPv6 주소, 또는 둘 다 반환됩니다.

`all` 옵션이 `true`로 설정된 경우, `Promise`는 `address`와 `family` 속성을 가진 객체 배열로 반환됩니다.

에러가 발생하면 `Promise`는 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체와 함께 거부됩니다. `err.code`는 에러 코드입니다. `err.code`는 호스트 이름이 존재하지 않을 때뿐만 아니라 파일 디스크립터가 부족한 경우와 같은 다른 이유로 조회가 실패할 때도 `'ENOTFOUND'`로 설정될 수 있습니다.

[`dnsPromises.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnspromiseslookuphostname-options)은 반드시 DNS 프로토콜과 관련이 있는 것은 아닙니다. 이 구현은 운영 체제의 기능을 사용하여 이름과 주소를 연결합니다. 이 구현은 Node.js 프로그램의 동작에 미묘하지만 중요한 영향을 미칠 수 있습니다. `dnsPromises.lookup()`을 사용하기 전에 [구현 고려 사항 섹션](https://nodejs.org/docs/latest/api/dns.html#implementation-considerations)을 참고하는 시간을 가져보세요.

예제 사용법:

```js
import dns from 'node:dns';
const dnsPromises = dns.promises;
const options = {
    family: 6,
    hints: dns.ADDRCONFIG | dns.V4MAPPED,
};

await dnsPromises.lookup('example.org', options).then((result) => {
    console.log('address: %j family: IPv%s', result.address, result.family);
    // address: "2606:2800:21f:cb07:6820:80da:af6b:8b2c" family: IPv6
});

// options.all이 true일 경우, 결과는 배열이 됩니다.
options.all = true;
await dnsPromises.lookup('example.org', options).then((result) => {
    console.log('addresses: %j', result);
    // addresses: [{"address":"2606:2800:21f:cb07:6820:80da:af6b:8b2c","family":6}]
});
```


#### `dnsPromises.lookupService(address, port)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromiseslookupserviceaddress-port)

추가된 버전: v10.6.0

-   `address` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)
-   `port` [`<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type)

이 메서드는 운영체제의 기본 `getnameinfo` 구현을 사용하여 주어진 `address`와 `port`를 호스트 이름과 서비스로 변환합니다.

`address`가 유효한 IP 주소가 아닌 경우, `TypeError`가 발생합니다. `port`는 숫자로 강제 변환됩니다. 만약 `port`가 유효한 포트 번호가 아니라면, `TypeError`가 발생합니다.

에러가 발생하면, `Promise`는 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체와 함께 거부됩니다. 이때 `err.code`는 에러 코드를 나타냅니다.

```js
import dnsPromises from 'node:dns/promises';

const result = await dnsPromises.lookupService('127.0.0.1', 22);
console.log(result.hostname, result.service); // 출력: localhost ssh
```


#### `dnsPromises.resolve(hostname[, rrtype])`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvehostname-rrtype)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 해결할 호스트 이름.
-   `rrtype` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 리소스 레코드 타입. **기본값:** `'A'`.

DNS 프로토콜을 사용하여 호스트 이름(예: `'nodejs.org'`)을 리소스 레코드 배열로 변환합니다. 성공하면 `Promise`가 리소스 레코드 배열로 해결됩니다. 개별 결과의 타입과 구조는 `rrtype`에 따라 다릅니다:

| `rrtype` | `records` 포함 내용 | 결과 타입 | 단축 메서드 |
| --- | --- | --- | --- |
| `'A'` | IPv4 주소 (기본값) | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolve4()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve4hostname-options) |
| `'AAAA'` | IPv6 주소 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolve6()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve6hostname-options) |
| `'ANY'` | 모든 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveAny()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveanyhostname) |
| `'CAA'` | CA 인증 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveCaa()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecaahostname) |
| `'CNAME'` | 정식 이름 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolveCname()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecnamehostname) |
| `'MX'` | 메일 교환 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvemxhostname) |
| `'NAPTR'` | 이름 권한 포인터 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenaptrhostname) |
| `'NS'` | 이름 서버 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolveNs()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenshostname) |
| `'PTR'` | 포인터 레코드 | [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolvePtr()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveptrhostname) |
| `'SOA'` | 권한 시작 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesoahostname) |
| `'SRV'` | 서비스 레코드 | [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | [`dnsPromises.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesrvhostname) |
| `'TXT'` | 텍스트 레코드 | [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | [`dnsPromises.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvetxthostname) |

오류가 발생하면 `Promise`는 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체와 함께 거부됩니다. 이때 `err.code`는 [DNS 오류 코드](https://nodejs.org/docs/latest/api/dns.html#error-codes) 중 하나입니다.


#### `dnsPromises.resolve4(hostname[, options])`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve4hostname-options)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 해결할 호스트 이름.
-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `ttl` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) 각 레코드의 Time-To-Live 값(TTL)을 가져올지 여부. `true`로 설정하면, `Promise`는 문자열 배열 대신 `{ address: '1.2.3.4', ttl: 60 }` 형태의 객체 배열로 해결되며, TTL은 초 단위로 표현됩니다.

DNS 프로토콜을 사용하여 `hostname`의 IPv4 주소(`A` 레코드)를 해결합니다. 성공 시, `Promise`는 IPv4 주소 배열(예: `['74.125.79.104', '74.125.79.105', '74.125.79.106']`)로 해결됩니다.


#### `dnsPromises.resolve6(hostname[, options])`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolve6hostname-options)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) 해결할 호스트 이름.
-   `options` [`<Object>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
    -   `ttl` [`<boolean>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type) 각 레코드의 Time-To-Live 값(TTL)을 가져올지 여부. `true`로 설정하면, `Promise`는 문자열 배열 대신 `{ address: '0:1:2:3:4:5:6:7', ttl: 60 }` 형태의 객체 배열로 해결됩니다. TTL은 초 단위로 표현됩니다.

DNS 프로토콜을 사용하여 `hostname`에 대한 IPv6 주소(`AAAA` 레코드)를 해결합니다. 성공 시, `Promise`는 IPv6 주소 배열로 해결됩니다.


#### `dnsPromises.resolveAny(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveanyhostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 모든 레코드를 해결합니다(`ANY` 또는 `*` 쿼리로도 알려져 있음). 성공 시, `Promise`는 다양한 타입의 레코드를 포함하는 배열로 해결됩니다. 각 객체는 현재 레코드의 타입을 나타내는 `type` 속성을 가지고 있습니다. 그리고 `type`에 따라 객체에 추가 속성이 존재할 수 있습니다:

| 타입 | 속성 |
| --- | --- |
| `'A'` | `address`/`ttl` |
| `'AAAA'` | `address`/`ttl` |
| `'CNAME'` | `value` |
| `'MX'` | [`dnsPromises.resolveMx()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvemxhostname) 참조 |
| `'NAPTR'` | [`dnsPromises.resolveNaptr()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenaptrhostname) 참조 |
| `'NS'` | `value` |
| `'PTR'` | `value` |
| `'SOA'` | [`dnsPromises.resolveSoa()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesoahostname) 참조 |
| `'SRV'` | [`dnsPromises.resolveSrv()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesrvhostname) 참조 |
| `'TXT'` | 이 타입의 레코드는 `entries`라는 배열 속성을 포함하며, 이는 [`dnsPromises.resolveTxt()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvetxthostname)를 참조합니다. 예: `{ entries: ['...'], type: 'TXT' }` |

다음은 결과 객체의 예제입니다:

```js
[
    { type: 'A', address: '127.0.0.1', ttl: 299 },
    { type: 'CNAME', value: 'example.com' },
    { type: 'MX', exchange: 'alt4.aspmx.l.example.com', priority: 50 },
    { type: 'NS', value: 'ns1.example.com' },
    { type: 'TXT', entries: [ 'v=spf1 include:_spf.example.com ~all' ] },
    { type: 'SOA', nsname: 'ns1.example.com', hostmaster: 'admin.example.com', serial: 156696742, refresh: 900, retry: 900, expire: 1800, minttl: 60 }
]
```


#### `dnsPromises.resolveCaa(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecaahostname)

추가된 버전: v15.0.0, v14.17.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 `CAA` 레코드를 조회합니다. 성공 시, `Promise`는 `hostname`에 사용 가능한 인증 기관 권한 레코드를 포함한 객체 배열로 해결됩니다. 예를 들어, `[{critical: 0, iodef: 'mailto:pki@example.com'},{critical: 128, issue: 'pki.example.com'}]`와 같은 형태입니다.


#### `dnsPromises.resolveCname(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvecnamehostname)

**추가된 버전:** v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 `CNAME` 레코드를 조회합니다. 성공하면, `Promise`는 `hostname`에 대한 정식 이름(canonical name) 레코드 배열로 이행됩니다. 예를 들어, `['bar.example.com']`과 같은 형태입니다.


#### `dnsPromises.resolveMx(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvemxhostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 메일 교환 레코드(`MX` 레코드)를 조회합니다. 성공 시, `Promise`는 `priority`와 `exchange` 속성을 포함하는 객체 배열로 해결됩니다. 예를 들어, `[{priority: 10, exchange: 'mx.example.com'}, ...]`와 같은 형태입니다.


#### `dnsPromises.resolveNaptr(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenaptrhostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 정규 표현식 기반 레코드(`NAPTR` 레코드)를 해결합니다. 성공 시, `Promise`는 다음 속성을 가진 객체 배열로 해결됩니다:

-   `flags`
-   `service`
-   `regexp`
-   `replacement`
-   `order`
-   `preference`

```js
{ flags: 's', service: 'SIP+D2U', regexp: '', replacement: '_sip._udp.example.com', order: 30, preference: 100 }
```


#### `dnsPromises.resolveNs(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvenshostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 네임 서버 레코드(`NS` 레코드)를 조회합니다. 성공 시, `Promise`는 `hostname`에 사용 가능한 네임 서버 레코드 배열로 이행됩니다 (예: `['ns1.example.com', 'ns2.example.com']`).


#### `dnsPromises.resolvePtr(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolveptrhostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 포인터 레코드(`PTR` 레코드)를 조회합니다. 성공 시, `Promise`는 응답 레코드를 포함한 문자열 배열로 이행됩니다.


#### `dnsPromises.resolveSoa(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesoahostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 권한 시작 레코드(`SOA` 레코드)를 조회합니다. 성공 시, `Promise`는 다음과 같은 속성을 가진 객체로 해결됩니다:

-   `nsname`
-   `hostmaster`
-   `serial`
-   `refresh`
-   `retry`
-   `expire`
-   `minttl`

```js
{
    nsname: 'ns.example.com',
    hostmaster: 'root.example.com',
    serial: 2013101809,
    refresh: 10000,
    retry: 2400,
    expire: 604800,
    minttl: 3600
}
```


#### `dnsPromises.resolveSrv(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvesrvhostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 서비스 레코드(`SRV` 레코드)를 조회합니다. 성공 시, `Promise`는 다음과 같은 속성을 가진 객체 배열로 해결됩니다:

-   `priority`
-   `weight`
-   `port`
-   `name`

```js
{ priority: 10, weight: 5, port: 21223, name: 'service.example.com' }
```


#### `dnsPromises.resolveTxt(hostname)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesresolvetxthostname)

추가된 버전: v10.6.0

-   `hostname` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

DNS 프로토콜을 사용하여 `hostname`에 대한 텍스트 쿼리(`TXT` 레코드)를 해결합니다. 성공하면, `Promise`는 `hostname`에 사용 가능한 텍스트 레코드의 2차원 배열로 해결됩니다 (예: `[ ['v=spf1 ip4:0.0.0.0 ', '~all' ] ]`). 각 하위 배열은 하나의 레코드의 TXT 청크를 포함합니다. 사용 사례에 따라 이들을 함께 결합하거나 별도로 처리할 수 있습니다.


#### `dnsPromises.reverse(ip)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesreverseip)

추가된 버전: v10.6.0

-   `ip` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)

이 메서드는 IPv4 또는 IPv6 주소를 호스트 이름 배열로 변환하는 역방향 DNS 쿼리를 수행합니다.

에러가 발생하면, `Promise`는 [`Error`](https://nodejs.org/docs/latest/api/errors.html#class-error) 객체와 함께 거부됩니다. 이때 `err.code`는 [DNS 에러 코드](https://nodejs.org/docs/latest/api/dns.html#error-codes) 중 하나입니다.


#### `dnsPromises.setDefaultResultOrder(order)`

- `order` [`<string>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type)은 반드시 `'ipv4first'`, `'ipv6first'`, 또는 `'verbatim'` 중 하나여야 합니다.

이 메서드는 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)와 [`dnsPromises.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnspromiseslookuphostname-options)에서 사용되는 `order`의 기본값을 설정합니다. 설정할 수 있는 값은 다음과 같습니다:

- `ipv4first`: 기본 `order`를 `ipv4first`로 설정합니다.
- `ipv6first`: 기본 `order`를 `ipv6first`로 설정합니다.
- `verbatim`: 기본 `order`를 `verbatim`으로 설정합니다.

기본값은 `verbatim`이며, [`dnsPromises.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisessetdefaultresultorderorder)는 [`--dns-result-order`](https://nodejs.org/docs/latest/api/cli.html#--dns-result-orderorder)보다 높은 우선순위를 가집니다. [워커 스레드](https://nodejs.org/docs/latest/api/worker_threads.html)를 사용할 때, 메인 스레드에서 호출한 [`dnsPromises.setDefaultResultOrder()`](https://nodejs.org/docs/latest/api/dns.html#dnspromisessetdefaultresultorderorder)는 워커 스레드의 기본 DNS 순서에 영향을 미치지 않습니다.


#### `dnsPromises.getDefaultResultOrder()`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisesgetdefaultresultorder)

추가된 버전: v20.1.0, v18.17.0

`dnsOrder`의 값을 가져옵니다.


#### `dnsPromises.setServers(servers)`[#](https://nodejs.org/docs/latest/api/dns.html#dnspromisessetserversservers)

추가된 버전: v10.6.0

- `servers` [`<string\[\]>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6) 형식의 주소 배열

DNS 해석을 수행할 때 사용할 서버의 IP 주소와 포트를 설정합니다. `servers` 인자는 [RFC 5952](https://tools.ietf.org/html/rfc5952#section-6) 형식의 주소 배열입니다. 포트가 IANA 기본 DNS 포트(53)인 경우 생략할 수 있습니다.

```js
dnsPromises.setServers([
    '8.8.8.8',
    '[2001:4860:4860::8888]',
    '8.8.8.8:1053',
    '[2001:4860:4860::8888]:1053',
]);
```

잘못된 주소가 제공되면 오류가 발생합니다.

DNS 쿼리가 진행 중일 때는 `dnsPromises.setServers()` 메서드를 호출할 수 없습니다.

이 메서드는 [resolve.conf](https://man7.org/linux/man-pages/man5/resolv.conf.5.html)와 매우 유사하게 동작합니다. 즉, 제공된 첫 번째 서버로 해석을 시도했을 때 `NOTFOUND` 오류가 발생하면, `resolve()` 메서드는 이후의 서버로 해석을 시도하지 않습니다. 이전 서버가 타임아웃되거나 다른 오류가 발생한 경우에만 대체 DNS 서버가 사용됩니다.


### 에러 코드

각 DNS 쿼리는 다음 에러 코드 중 하나를 반환할 수 있습니다:

- `dns.NODATA`: DNS 서버가 데이터 없이 응답을 반환했습니다.
- `dns.FORMERR`: DNS 서버가 쿼리가 잘못 형식화되었다고 주장합니다.
- `dns.SERVFAIL`: DNS 서버가 일반적인 실패를 반환했습니다.
- `dns.NOTFOUND`: 도메인 이름을 찾을 수 없습니다.
- `dns.NOTIMP`: DNS 서버가 요청된 작업을 구현하지 않습니다.
- `dns.REFUSED`: DNS 서버가 쿼리를 거부했습니다.
- `dns.BADQUERY`: 잘못 형식화된 DNS 쿼리입니다.
- `dns.BADNAME`: 잘못 형식화된 호스트 이름입니다.
- `dns.BADFAMILY`: 지원되지 않는 주소 패밀리입니다.
- `dns.BADRESP`: 잘못 형식화된 DNS 응답입니다.
- `dns.CONNREFUSED`: DNS 서버에 연결할 수 없습니다.
- `dns.TIMEOUT`: DNS 서버에 연결하는 동안 시간 초과가 발생했습니다.
- `dns.EOF`: 파일의 끝입니다.
- `dns.FILE`: 파일을 읽는 중 에러가 발생했습니다.
- `dns.NOMEM`: 메모리가 부족합니다.
- `dns.DESTRUCTION`: 채널이 파괴되고 있습니다.
- `dns.BADSTR`: 잘못 형식화된 문자열입니다.
- `dns.BADFLAGS`: 잘못된 플래그가 지정되었습니다.
- `dns.NONAME`: 주어진 호스트 이름이 숫자가 아닙니다.
- `dns.BADHINTS`: 잘못된 힌트 플래그가 지정되었습니다.
- `dns.NOTINITIALIZED`: c-ares 라이브러리 초기화가 아직 수행되지 않았습니다.
- `dns.LOADIPHLPAPI`: `iphlpapi.dll`을 로드하는 중 에러가 발생했습니다.
- `dns.ADDRGETNETWORKPARAMS`: `GetNetworkParams` 함수를 찾을 수 없습니다.
- `dns.CANCELLED`: DNS 쿼리가 취소되었습니다.

`dnsPromises` API도 위의 에러 코드를 내보냅니다. 예를 들어, `dnsPromises.NODATA`와 같습니다.


### 구현 시 고려사항

[`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)과 다양한 `dns.resolve*()/dns.reverse()` 함수는 모두 네트워크 이름을 네트워크 주소와 연결(또는 그 반대)하는 동일한 목표를 가지고 있지만, 그 동작 방식은 상당히 다릅니다. 이러한 차이점은 Node.js 프로그램의 동작에 미묘하지만 중요한 영향을 미칠 수 있습니다.


#### `dns.lookup()`[#](https://nodejs.org/docs/latest/api/dns.html#dnslookup)

내부적으로 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)은 대부분의 다른 프로그램과 동일한 운영체제 기능을 사용합니다. 예를 들어, [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)은 거의 항상 `ping` 커맨드와 동일한 방식으로 주어진 이름을 해결합니다. 대부분의 POSIX 계열 운영체제에서 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback) 함수의 동작은 [`nsswitch.conf(5)`](http://man7.org/linux/man-pages/man5/nsswitch.conf.5.html) 및/또는 [`resolv.conf(5)`](http://man7.org/linux/man-pages/man5/resolv.conf.5.html) 파일의 설정을 변경하여 수정할 수 있습니다. 하지만 이러한 파일을 변경하면 동일한 운영체제에서 실행 중인 다른 모든 프로그램의 동작도 변경됩니다.

`dns.lookup()` 호출은 자바스크립트의 관점에서 비동기적으로 보이지만, 실제로는 libuv의 스레드 풀에서 실행되는 [`getaddrinfo(3)`](http://man7.org/linux/man-pages/man3/getaddrinfo.3.html)에 대한 동기 호출로 구현됩니다. 이는 일부 애플리케이션에서 예상치 못한 성능 저하를 초래할 수 있습니다. 자세한 내용은 [`UV_THREADPOOL_SIZE`](https://nodejs.org/docs/latest/api/cli.html#uv_threadpool_sizesize) 문서를 참고하세요.

다양한 네트워킹 API는 내부적으로 호스트 이름을 해결하기 위해 `dns.lookup()`을 호출합니다. 이 문제가 발생할 경우, `dns.resolve()`를 사용하여 호스트 이름을 주소로 해결하고 호스트 이름 대신 주소를 사용하는 것을 고려해보세요. 또한, 일부 네트워킹 API(예: [`socket.connect()`](https://nodejs.org/docs/latest/api/net.html#socketconnectoptions-connectlistener) 및 [`dgram.createSocket()`](https://nodejs.org/docs/latest/api/dgram.html#dgramcreatesocketoptions-callback))는 기본 리졸버인 `dns.lookup()`을 대체할 수 있도록 허용합니다.


#### `dns.resolve()`, `dns.resolve*()`, 그리고 `dns.reverse()`[#](https://nodejs.org/docs/latest/api/dns.html#dnsresolve-dnsresolve-and-dnsreverse)

이 함수들은 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)과는 상당히 다르게 구현되어 있습니다. 이들은 [`getaddrinfo(3)`](http://man7.org/linux/man-pages/man3/getaddrinfo.3.html)을 사용하지 않으며, 항상 네트워크를 통해 DNS 쿼리를 수행합니다. 이 네트워크 통신은 항상 비동기적으로 이루어지며, libuv의 스레드 풀을 사용하지 않습니다.

따라서, 이 함수들은 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)이 libuv의 스레드 풀에서 다른 작업에 미칠 수 있는 부정적인 영향을 미치지 않습니다.

또한, 이 함수들은 [`dns.lookup()`](https://nodejs.org/docs/latest/api/dns.html#dnslookuphostname-options-callback)이 사용하는 동일한 설정 파일을 사용하지 않습니다. 예를 들어, `/etc/hosts`의 설정을 사용하지 않습니다.


